(()=>{var e,t,n,r,i,a={89546:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}},76588:(e,t,n)=>{"use strict";n.d(t,{y:()=>r});var r=[{label:"video-sw-decode",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_DECODE"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_DECODE"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/webm; codecs="vp8"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:"SW_SECURE_CRYPTO"}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"video-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/webm; codecs="opus"',robustness:""},{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[{contentType:'video/webm; codecs="vp9"',robustness:""},{contentType:'video/webm; codecs="vp8"',robustness:""},{contentType:'video/mp4; codecs="avc1.4d401f"',robustness:""},{contentType:'video/mp2t; codecs="avc1.4d401f"',robustness:""}],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:"SW_SECURE_CRYPTO"},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-flac-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="flac"',robustness:""},{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-sw-crypto",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:"SW_SECURE_CRYPTO"}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]},{label:"audio-no-robustness",initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"',robustness:""}],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:"optional",sessionTypes:["temporary"]}]},1993:(e,t,n)=>{"use strict";n.d(t,{D:()=>o});var r,i=n(48466),a=n(28677),o=(r={},(0,i.Z)(r,a.v.WIDEVINE,{commonName:"widevine",licenseServer:"https://@webgate/widevine-license",withCertificate:!0,pssh_field:{audio:"pssh_widevine",video:"encryption_data"}}),(0,i.Z)(r,a.v.PLAYREADY,{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}}),(0,i.Z)(r,a.v.PLAYREADY_HARDWARE,{commonName:"playready",licenseServer:"https://@webgate/playready-license",withCertificate:!1,pssh_field:{audio:"pssh_playready",video:"encryption_data"}}),(0,i.Z)(r,a.v.FAIRPLAY,{commonName:"fairplay",licenseServer:"https://@webgate/fairplay-license",withCertificate:!0,pssh_field:{audio:"pssh_fairplay",video:"asset_id"}}),(0,i.Z)(r,a.v.INVALID_SPOTIFY_KEY,{commonName:"spotify-invalid",licenseServer:"https://@webgate",withCertificate:!1,pssh_field:{audio:"pssh_invalid",video:"encryption_data"}}),r)},82961:(e,t,n)=>{"use strict";n.d(t,{C:()=>se});n(28977),n(8090),n(81175),n(14042),n(47370),n(27433),n(89674);var r=n(12130),i=n(7403),a=n(56141),o=n(75108),s=n(61351),c=n(28280),u=(n(10817),n(35802),n(17170),n(71827),n(94457),n(259),n(44437),n(22554),n(83883),n(14936),n(4203),n(61025),n(31711),n(72553),n(72511),n(58254),n(58984),n(27525),n(2366),n(57888),n(41940),n(85769),n(85825),n(85752),n(28489),n(91414),n(18796),n(11875),n(17612),n(40239),n(83337),n(54290),n(33192),n(32272),n(17957),n(64826),n(20716),n(9829),n(52824),n(94603),n(79489),n(29609),n(64233),n(39125),n(35292),n(5630),n(59699),n(91564),n(89914),n(12282),n(74461),n(99949),n(91080),n(83971),n(26361),n(28897),n(78902),n(47871)),l=n(77),d=n(11213),p=n(56946),f=n(32987),v=n(28677),h=n(90632);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var m=function(e){(0,o.Z)(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.D.EME_ERROR_UNKNOWN,a=arguments.length>1?arguments[1]:void 0;return(0,i.Z)(this,n),(e=t.call(this,a)).status=-1,e.licenseServer="",e.shouldRefreshEndpoint=!1,e.unrecoverable=!1,e.debug={},e.code=r,e.message=a,e.name="EMEError",e}return(0,a.Z)(n,null,[{key:"fatal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.D.EME_ERROR_UNKNOWN,t=arguments.length>1?arguments[1]:void 0,r=new n(e,t);return r.unrecoverable=!0,r}}]),n}((0,h.Z)(Error));function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var E=function(e){(0,o.Z)(n,e);var t=_(n);function n(e,r){var a;return(0,i.Z)(this,n),(a=t.call(this,r)).name="CappingError",a.message=r,a.code=e,a}return(0,a.Z)(n)}((0,h.Z)(Error)),b=n(43565);function g(e){var t=document.createEvent("Event");t.initEvent("encrypted",!1,!1),t.initDataType="cenc",t.initData=e.initData,t.fromPolyfill=!0,this.dispatchEvent(t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var k=function(e){(0,o.Z)(n,e);var t=S(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,p.j.KEY_SESSION_MESSAGE,null)).messageType="license-request",r.message=e,r}return(0,a.Z)(n)}(u.B);function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var w=function(e){(0,o.Z)(n,e);var t=R(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this))._nativeKeySession=null,r._lastUpdateDeferred=(0,d.$)(),r._lastGenerateDeferred=(0,d.$)(),r.addEventListener=r.addListener,r.removeEventListener=r.removeListener,r._nativeMediaKeys=e,r._onKeyMessage=r._onKeyMessage.bind((0,b.Z)(r)),r._onKeyAdded=r._onKeyAdded.bind((0,b.Z)(r)),r._onKeyError=r._onKeyError.bind((0,b.Z)(r)),r}return(0,a.Z)(n,[{key:"_attach",value:function(){var e=this._nativeKeySession;e&&(e.addEventListener(p.j.MS_KEY_ADDED,this._onKeyAdded),e.addEventListener(p.j.MS_KEY_ERROR,this._onKeyError),e.addEventListener(p.j.MS_KEY_MESSAGE,this._onKeyMessage))}},{key:"_detach",value:function(){var e=this._nativeKeySession;e&&(e.removeEventListener(p.j.MS_KEY_ADDED,this._onKeyAdded),e.removeEventListener(p.j.MS_KEY_ERROR,this._onKeyError),e.removeEventListener(p.j.MS_KEY_MESSAGE,this._onKeyMessage))}},{key:"_onKeyMessage",value:function(e){e.message&&e.message.buffer&&(this.emitEvent(new k(e.message.buffer)),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null))}},{key:"_onKeyAdded",value:function(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this._lastGenerateDeferred&&(this._lastGenerateDeferred.resolve(!0),this._lastGenerateDeferred=null),this.emit(p.j.KEY_SESSION_STATUSES_CHANGE,null)}},{key:"_onKeyError",value:function(){var e=this._nativeKeySession&&this._nativeKeySession.error;this._lastGenerateDeferred&&(this._lastGenerateDeferred.reject(e),this._lastGenerateDeferred=null),this._lastUpdateDeferred&&(this._lastUpdateDeferred.reject(e),this._lastUpdateDeferred=null),this.emit(p.j.KEY_SESSION_STATUSES_CHANGE,null)}},{key:"generateRequest",value:function(e,t){var n=this;return new Promise((function(e,r){n._lastGenerateDeferred&&(n._lastGenerateDeferred.resolve=e,n._lastGenerateDeferred.reject=r),n._nativeKeySession=n._nativeMediaKeys.createSession("audio/mp4",new Uint8Array(t),null),n._attach()}))}},{key:"update",value:function(e){var t=this;return new Promise((function(n,r){t._lastGenerateDeferred&&(t._lastGenerateDeferred.resolve=n,t._lastGenerateDeferred.reject=r),t._nativeKeySession&&t._nativeKeySession.update(new Uint8Array(e))}))}},{key:"close",value:function(){var e=this;return new Promise((function(t){e._nativeKeySession&&e._nativeKeySession.close(),e._detach(),t(!0)}))}}]),n}(u.vp),O=function(){function e(t){(0,i.Z)(this,e),this._lastBoundSetter=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new MSMediaKeys(t)}return(0,a.Z)(e,[{key:"attach",value:function(e){var t=this;return new Promise((function(n){if(e.readyState>=1)return e.msSetMediaKeys(t._nativeMediaKeys),void n();var r=function n(){e.removeEventListener(p.j.MEDIA_LOADEDMETADATA,n),t._lastBoundSetter=null,e.msSetMediaKeys(t._nativeMediaKeys)};t._lastBoundSetter=r,e.addEventListener(p.j.MEDIA_LOADEDMETADATA,r),e.addEventListener(p.j.MS_NEEDKEY,g),n()}))}},{key:"detach",value:function(e){this._lastBoundSetter&&(e.removeEventListener(p.j.MS_NEEDKEY,g),e.removeEventListener(p.j.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}},{key:"setServerCertificate",value:function(){return Promise.reject(new m(f.D.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}},{key:"createSession",value:function(){return new w(this._nativeMediaKeys)}}]),e}();function P(e){var t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}var N=function(){function e(t,n){if((0,i.Z)(this,e),this._configuration=null,this.keySystem=t,!this._checkConfig(n))throw new m(f.D.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}return(0,a.Z)(e,[{key:"_checkConfig",value:function(e){var t,n,r,i=this.keySystem,a=T(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s={initDataTypes:o.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:o.label},c=void 0;if(o.audioCapabilities&&o.audioCapabilities.length&&s.audioCapabilities){c=!1;var u,l=T(o.audioCapabilities);try{for(l.s();!(u=l.n()).done;){var d=u.value,p=null===(t=d.contentType)||void 0===t?void 0:t.split(";")[0];MSMediaKeys.isTypeSupported(i,p)&&(s.audioCapabilities.push(d),c=!0)}}catch(m){l.e(m)}finally{l.f()}}if(o.videoCapabilities&&o.videoCapabilities.length&&s.videoCapabilities){c=!1;var f,v=T(o.videoCapabilities);try{for(v.s();!(f=v.n()).done;){var h=f.value,y=null===(n=h.contentType)||void 0===n?void 0:n.split(";")[0];MSMediaKeys.isTypeSupported(i,y)&&(s.videoCapabilities.push(h),c=!0)}}catch(m){v.e(m)}finally{v.f()}}if(c)return this._configuration=s,!0}}catch(m){a.e(m)}finally{a.f()}return!1}},{key:"getConfiguration",value:function(){return this._configuration}},{key:"createMediaKeys",value:function(){var e=this;return new Promise((function(t){t(new O(e.keySystem))}))}}]),e}();n(82798);function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var C=l.P.forTag("eme_polyfill.v0_1b"),M=function(e){(0,o.Z)(n,e);var t=L(n);function n(e,r,a){var o;return(0,i.Z)(this,n),(o=t.call(this))._mediaElement=null,o._lastUpdateDeferred=null,o._lastGenerateResolver=null,o.sessionId=null,o._keySystem=e,o._mediaElement=r,o._prefix=a,o.addEventListener=o.addListener,o.removeEventListener=o.removeListener,o}return(0,a.Z)(n,[{key:"_addPrefix",value:function(e){return this._prefix?this._prefix+e.replace(/\b[a-z]/,(function(e){return e.toUpperCase()})):e}},{key:"generateComplete",value:function(e){this.emitEvent(new k(e)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null)}},{key:"updateComplete",value:function(){this._lastUpdateDeferred&&(this._lastUpdateDeferred.resolve(!0),this._lastUpdateDeferred=null),this.emit(p.j.KEY_SESSION_STATUSES_CHANGE,null)}},{key:"handleErrorEvent",value:function(e){var t=new m(f.D.EME_MEDIA_KEY_SESSION_V0_1B_ERROR,"MediaKeySession v0.1b Error");t.debug.errorCode=e.errorCode,t.debug.systemCode=e.systemCode,!e.sessionId&&this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):e.sessionId&&this._lastUpdateDeferred?(this._lastUpdateDeferred.reject(t),this._lastUpdateDeferred=null):this.emit(p.j.KEY_SESSION_STATUSES_CHANGE,null)}},{key:"generateRequest",value:function(e,t){var n=this;return this._mediaElement?new Promise((function(e,r){n._lastGenerateResolver={resolve:e,reject:r};try{n._mediaElement[n._addPrefix("generateKeyRequest")](n._keySystem,new Uint8Array(t))}catch(i){r(i),n._lastGenerateResolver=null}})):Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."))}},{key:"update",value:function(e){if(!this._mediaElement)return Promise.reject(new ReferenceError("InvalidState: Media keys are not attached."));if(this._lastUpdateDeferred){var t=this.update.bind(this,e);return this._lastUpdateDeferred.promise.then(t,t)}var n=(0,d.$)();this._lastUpdateDeferred=n;try{this._mediaElement[this._addPrefix("addKey")](this._keySystem,new Uint8Array(e),null,this.sessionId)}catch(r){n.reject(r),this._lastUpdateDeferred=null}return n.promise}},{key:"close",value:function(){if(this.sessionId&&this._mediaElement)try{this._mediaElement[this._addPrefix("cancelKeyRequest")](this._keySystem,this.sessionId)}catch(e){C.warn("Could not close keysession",e)}return Promise.resolve(!0)}}]),n}(u.vp),x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,i.Z)(this,e),this._mediaElement=null,this._waitingForSessionIds=[],this._sessionMap={},this.shouldRefreshPerTrack=!0,this._keySystem=t,this._prefix=n,this._onKeyMessage=this._onKeyMessage.bind(this),this._onKeyAdded=this._onKeyAdded.bind(this),this._onKeyError=this._onKeyError.bind(this)}return(0,a.Z)(e,[{key:"attach",value:function(e){this._mediaElement=e;var t=this._prefix;e.addEventListener(t+p.j.V0_1B_NEEDKEY,g);var n=e.addEventListener.bind(e);n(t+p.j.V0_1B_KEY_ADDED,this._onKeyAdded),n(t+p.j.V0_1B_KEY_ERROR,this._onKeyError),n(t+p.j.V0_1B_KEY_MESSAGE,this._onKeyMessage)}},{key:"detach",value:function(e){this._mediaElement=null;var t=this._prefix;e.removeEventListener(t+p.j.V0_1B_NEEDKEY,g);var n=e.removeEventListener.bind(e);n(t+p.j.V0_1B_KEY_ADDED,this._onKeyAdded),n(t+p.j.V0_1B_KEY_ERROR,this._onKeyError),n(t+p.j.V0_1B_KEY_MESSAGE,this._onKeyMessage)}},{key:"_getSession",value:function(e){var t=this._sessionMap[e];if(t)return t;var n=this._waitingForSessionIds.shift();return n?(n.sessionId=e,this._sessionMap[e]=n,n):null}},{key:"_onKeyMessage",value:function(e){var t=this._getSession(e.sessionId);t?t.generateComplete(e.message):C.warn("Got keymessage without session.")}},{key:"_onKeyAdded",value:function(e){var t=this._getSession(e.sessionId);t?t.updateComplete():C.warn("Got keyadded without session.")}},{key:"_onKeyError",value:function(e){var t=this._getSession(e.sessionId);t?t.handleErrorEvent(e):C.warn("Got keyerror without session.")}},{key:"setServerCertificate",value:function(){return Promise.reject(new m(f.D.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM,"Cannot set server certificate on this platform."))}},{key:"createSession",value:function(){var e=new M(this._keySystem,this._mediaElement,this._prefix);return this._waitingForSessionIds.push(e),e}}]),e}();function j(e){var t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e&&e.attach(this),Promise.resolve()}var U=function(){function e(t,n,r){if((0,i.Z)(this,e),this._configuration=null,this.keySystem=t,this._prefix=r,!this._checkConfig(n))throw new m(f.D.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations")}return(0,a.Z)(e,[{key:"_checkConfig",value:function(e){var t,n,r,i=this.keySystem,a=document.createElement("video"),o=I(e);try{for(o.s();!(r=o.n()).done;){var s=r.value,c={initDataTypes:s.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"],label:s.label},u=!1;if(s.audioCapabilities&&s.audioCapabilities.length&&c.audioCapabilities){u=!1;var l,d=I(s.audioCapabilities);try{for(d.s();!(l=d.n()).done;){var p=l.value,f=null===(t=p.contentType)||void 0===t?void 0:t.split(";")[0];f&&a.canPlayType(f,i)&&(c.audioCapabilities.push(p),u=!0)}}catch(_){d.e(_)}finally{d.f()}}if(s.videoCapabilities&&s.videoCapabilities.length&&c.videoCapabilities){u=!1;var v,h=I(s.videoCapabilities);try{for(h.s();!(v=h.n()).done;){var y=v.value,m=null===(n=y.contentType)||void 0===n?void 0:n.split(";")[0];m&&a.canPlayType(m,i)&&(c.videoCapabilities.push(y),u=!0)}}catch(_){h.e(_)}finally{h.f()}}if(u)return this._configuration=c,!0}}catch(_){o.e(_)}finally{o.f()}return!1}},{key:"getConfiguration",value:function(){return this._configuration}},{key:"createMediaKeys",value:function(){var e=this;return new Promise((function(t){t(new x(e.keySystem,e._prefix))}))}}]),e}();function Z(e){navigator.requestMediaKeySystemAccess=function(t,n){return new Promise((function(r){r(new U(t,n,e))}))};var t=HTMLMediaElement.prototype;delete t.mediaKeys,t.setMediaKeys=j}function K(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var B=l.P.forTag("eme_polyfill.safari");var G=function(e){(0,o.Z)(n,e);var t=F(n);function n(e,r){var a;return(0,i.Z)(this,n),(a=t.call(this))._attached=!1,a._nativeKeySession=null,a._lastGenerateResolver=(0,d.$)(),a._lastUpdateResolver=(0,d.$)(),a.addEventListener=a.addListener,a.removeEventListener=a.removeListener,a._nativeMediaKeys=e,a._serverCertificate=r,a._onKeyMessage=a._onKeyMessage.bind((0,b.Z)(a)),a._onKeyAdded=a._onKeyAdded.bind((0,b.Z)(a)),a._onKeyError=a._onKeyError.bind((0,b.Z)(a)),a}return(0,a.Z)(n,[{key:"_attach",value:function(){if(!this._attached){var e=this._nativeKeySession;e?(e.addEventListener(p.j.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.addEventListener(p.j.WEBKIT_KEY_ADDED,this._onKeyAdded),e.addEventListener(p.j.WEBKIT_KEY_ERROR,this._onKeyError)):B.warn("Tried to attach with no WebKitMediaKeySession")}}},{key:"_detach",value:function(){if(this._attached){var e=this._nativeKeySession;e?(e.removeEventListener(p.j.WEBKIT_KEY_MESSAGE,this._onKeyMessage),e.removeEventListener(p.j.WEBKIT_KEY_ADDED,this._onKeyAdded),e.removeEventListener(p.j.WEBKIT_KEY_ERROR,this._onKeyError)):B.warn("Tried to detach with no WebKitMediaKeySession")}}},{key:"_onKeyMessage",value:function(e){e.message&&e.message.buffer&&(this.emitEvent(new k(e.message.buffer)),this._lastGenerateResolver&&(this._lastGenerateResolver.resolve(!0),this._lastGenerateResolver=null))}},{key:"_onKeyAdded",value:function(){this._lastUpdateResolver&&(this._lastUpdateResolver.resolve(!0),this._lastUpdateResolver=null),this.emit(p.j.KEY_SESSION_STATUSES_CHANGE,null)}},{key:"_onKeyError",value:function(){var e=this._nativeKeySession&&this._nativeKeySession.error,t=new m(f.D.EME_MEDIA_KEY_SESSION_SAFARI_ERROR,e&&e.message||"MediaKeySession Safari Error");e&&(t.debug.errorCode=e.code,t.debug.systemCode=e.systemCode),this._lastGenerateResolver?(this._lastGenerateResolver.reject(t),this._lastGenerateResolver=null):this._lastUpdateResolver&&(this._lastUpdateResolver.reject(t),this._lastUpdateResolver=null)}},{key:"_rebuildInitData",value:function(e){var t=new Uint8Array(e);if(new DataView(t.buffer).getUint32(0,!0)+4!==t.byteLength)throw new m(f.D.EME_INIT_DATA_MALFORMED,"Malformed init data");var n=function(e){for(var t=Math.floor(e.byteLength/2),n=new Uint16Array(t),r=new DataView(e.buffer),i=0;i<t;i++)n[i]=r.getUint16(2*i,!0);return String.fromCharCode.apply(null,n)}(t.slice(4)),r=n.match(/^skd:\/\/([0-9a-fA-F]+)/);if(!(null==r?void 0:r[1]))throw new m(f.D.EME_INIT_DATA_MALFORMED,"Invalid content ID");var i=r[1],a=new Uint8Array(function(e){for(var t=new Uint8Array(2*e.length),n=new DataView(t.buffer),r=e.split(""),i=0,a=r.length;i<a;i++){var o=r[i].charCodeAt(0);n.setUint16(2*i,o,!0)}return t.buffer}(i)),o=this._serverCertificate,s=new Uint8Array(t.byteLength+4+a.byteLength+4+o.byteLength),c=0;s.set(t,c),c+=t.byteLength;var u=new DataView(s.buffer);return u.setUint32(c,a.byteLength,!0),c+=4,s.set(a,c),c+=a.byteLength,u.setUint32(c,o.byteLength,!0),c+=4,s.set(o,c),s}},{key:"generateRequest",value:function(e,t){var n=this;return new Promise((function(e,r){n._lastGenerateResolver={resolve:e,reject:r};try{var i=n._rebuildInitData(t);n._nativeKeySession=n._nativeMediaKeys.createSession("video/mp4",new Uint8Array(i),null),n._attach()}catch(a){n._lastGenerateResolver=null,r(a)}}))}},{key:"update",value:function(e){var t=(0,d.$)();if(this._lastUpdateResolver=t,!this._nativeKeySession)return B.warn("Tried to update with no WebKitMediaKeySession"),t.promise;try{this._nativeKeySession.update(new Uint8Array(e))}catch(n){t.reject(n)}return t.promise}},{key:"close",value:function(){var e=this;return new Promise((function(t){e._detach(),t(!0)}))}}]),n}(u.vp),H=function(){function e(t){(0,i.Z)(this,e),this._lastBoundSetter=null,this._serverCertificate=null,this.shouldRefreshPerTrack=!0,this._nativeMediaKeys=new WebKitMediaKeys(t)}return(0,a.Z)(e,[{key:"attach",value:function(e){var t=this;return new Promise((function(n){if(e.readyState>=1)return e.webkitSetMediaKeys(t._nativeMediaKeys),void n();var r=function n(){e.removeEventListener(p.j.MEDIA_LOADEDMETADATA,n),t._lastBoundSetter=null,e.webkitSetMediaKeys(t._nativeMediaKeys)};t._lastBoundSetter=r,e.addEventListener(p.j.MEDIA_LOADEDMETADATA,r),e.addEventListener(p.j.WEBKIT_NEEDKEY,g),n()}))}},{key:"detach",value:function(e){e.removeEventListener(p.j.WEBKIT_NEEDKEY,g),this._lastBoundSetter&&(e.removeEventListener(p.j.MEDIA_LOADEDMETADATA,this._lastBoundSetter),this._lastBoundSetter=null)}},{key:"setServerCertificate",value:function(e){return this._serverCertificate=new Uint8Array(e),Promise.resolve(!0)}},{key:"createSession",value:function(){if(!this._serverCertificate)throw new m(f.D.EME_INVALID_STATE_ERROR,"The server certificate is not available");return new G(this._nativeMediaKeys,this._serverCertificate)}}]),e}(),W=function(){function e(t,n){(0,i.Z)(this,e),this.keySystem=t;var r=this._checkConfig(n);if(!r)throw new m(f.D.EME_NO_SUPPORTED_CONFIGURATION,"No supported configurations");this._configuration=r}return(0,a.Z)(e,[{key:"_checkConfig",value:function(e){var t,n=this.keySystem,r=!1,i=K(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o={initDataTypes:a.initDataTypes,audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",sessionTypes:["temporary"]};if(a.audioCapabilities){var s,c=K(a.audioCapabilities);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(u.contentType){var l=u.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(n,l)&&(o.audioCapabilities.push(u),r=!0)}}}catch(h){c.e(h)}finally{c.f()}}if(a.videoCapabilities){var d,p=K(a.videoCapabilities);try{for(p.s();!(d=p.n()).done;){var f=d.value;if(f.contentType){var v=f.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(n,v)&&(o.videoCapabilities.push(f),r=!0)}}}catch(h){p.e(h)}finally{p.f()}}if(r)return o}}catch(h){i.e(h)}finally{i.f()}return null}},{key:"getConfiguration",value:function(){return this._configuration}},{key:"createMediaKeys",value:function(){var e=this;return new Promise((function(t){t(new H(e.keySystem))}))}}]),e}();function q(e){var t=this.mediaKeys;return t&&t!==e&&t.detach(this),delete this.mediaKeys,this.mediaKeys=e,e?e.attach(this):Promise.resolve()}var V=l.P.forTag("eme_polyfills.tester");function z(){return"undefined"!=typeof navigator&&(null===navigator||void 0===navigator?void 0:navigator.requestMediaKeySystemAccess)&&"undefined"==typeof WebKitMediaKeys&&"undefined"!=typeof MediaKeySystemAccess&&(null===MediaKeySystemAccess||void 0===MediaKeySystemAccess?void 0:MediaKeySystemAccess.prototype.getConfiguration)?(V.log("Using native EME implementation."),"native"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.webkitGenerateKeyRequest)?(V.log('Detected "webkit" Prefixed EME v0.1b. Polyfilling.'),Z("webkit"),"v0.1b-webkit"):"undefined"!=typeof HTMLMediaElement&&(null===HTMLMediaElement||void 0===HTMLMediaElement?void 0:HTMLMediaElement.prototype.generateKeyRequest)?(V.log("Detected Unprefixed EME v0.1b. Polyfilling."),Z(),"v0.1b"):"undefined"!=typeof MSMediaKeys?(V.log("Detected MS IE EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((function(n){n(new N(e,t))}))};var e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=P}(),"ms-ie"):"function"==typeof WebKitMediaKeys?(V.log("Detected Safari EME. Polyfilling."),function(){navigator.requestMediaKeySystemAccess=function(e,t){return new Promise((function(n){n(new W(e,t))}))};var e=HTMLMediaElement.prototype;delete e.mediaKeys,e.setMediaKeys=q}(),"safari"):(V.warn("Detected no EME APIs."),null)}var Q=n(1993),J=n(76588),X=n(31236);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}function ee(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=/([^;]+)(?:;\s?codecs="(.*)")?/,re=l.P.forTag("playback.eme_manager"),ie={EMPTY:"-no-robustness",SW_CRYPTO:"-sw-crypto",SW_DECODE:"-sw-decode",HW_CRYPTO:"-hw-crypto",HW_DECODE:"-hw-decode",HW_ALL:"-hw-all"};function ae(e,t){var n,r,i=[],a=new RegExp('codecs="('.concat(t.join("|"),')"')),o=ee(e);try{for(o.s();!(r=o.n()).done;){var s=r.value;a.test(null!==(n=s.contentType)&&void 0!==n?n:"")||i.push(s)}}catch(c){o.e(c)}finally{o.f()}return i.length?i:null}function oe(e,t){var n,r,i,a,o=t.audio,s=t.video;if(!(null==o?void 0:o.length)&&!(null==s?void 0:s.length))return e;var c=e.audioCapabilities,u=e.videoCapabilities;return(null==o?void 0:o.length)&&(null===(n=e.audioCapabilities)||void 0===n?void 0:n.length)&&!(c=null!==(r=ae(e.audioCapabilities,o))&&void 0!==r?r:void 0)||(null==s?void 0:s.length)&&(null===(i=e.videoCapabilities)||void 0===i?void 0:i.length)&&!(u=null!==(a=ae(e.videoCapabilities,s))&&void 0!==a?a:void 0)?null:Object.assign(Object.assign({},e),{audioCapabilities:c,videoCapabilities:u})}var se=function(e){(0,o.Z)(n,e);var t=$(n);function n(e){var r,a;return(0,i.Z)(this,n),(r=t.call(this))._unauthServerCertificateBase="",r._disallowCodecs={},r._keySystemDeferred=(0,d.$)(),r._configuration=(0,d.$)(),r._keySystemSettings=null,r._keySessions=[],r._configs=[],r._pendingCertificateRequest=null,r._certificate=null,r._transport=e.transport,r._emeImpl=e.emeImpl,r._noServerCertificate=!!e.noServerCertificate,r._precacheServerCertificate=null===(a=e.precacheServerCertificate)||void 0===a||a,r._unauthServerCertificateBase=e.unauthServerCertificateBase||"https://spclient.wg.spotify.com",r._configFilter=function(e){var t=["--ensure-no-match--"];if(null==e?void 0:e.length)for(var n=e.length;n--;){var r=e[n];r&&ie.hasOwnProperty(r)&&t.push(ie[r])}return new RegExp("(".concat(t.join("|"),")$"))}(e.disallowRobustnessValues||[]),r._disallowCodecs=e.disallowCodecs,r._preferredKeySystems=e.preferredKeySystems||[v.v.WIDEVINE,v.v.PLAYREADY,v.v.PLAYREADY_HARDWARE,v.v.FAIRPLAY],r}return(0,a.Z)(n,[{key:"_prepareConfiguration",value:function(e){var t=e.getConfiguration();re.info("KeySystem configured as ",t.label),t.audioCapabilities&&t.audioCapabilities.length||this._appendProbableMediaCapabilities(e.keySystem,t);var n={keySystem:e.keySystem,keySystemImpl:this._emeImpl,audioFormats:this._parseCapabilities(t.audioCapabilities),videoFormats:this._parseCapabilities(t.videoCapabilities)};return this._keySystemSettings=Q.D[e.keySystem],this._configuration.resolve(n),n}},{key:"_parseCapabilities",value:function(e){var t;if(!e)return[];var n,i=[],a=ee(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(null==o?void 0:o.contentType){var s=null!==(t=o.contentType.match(ne))&&void 0!==t?t:[],c=(0,r.Z)(s,3),u=c[1],l=c[2];u&&i.push({contentType:o.contentType,mimeType:u,codec:null!=l?l:""})}}}catch(d){a.e(d)}finally{a.f()}return i}},{key:"_appendProbableMediaCapabilities",value:function(e,t){var n=(0,X.M)(this._configs,(function(t){return(-1===t.indexOf("webm")||e!==v.v.PLAYREADY&&e!==v.v.PLAYREADY_HARDWARE)&&!!MediaSource.isTypeSupported(t)}));n&&(t.audioCapabilities=n.audioCapabilities,t.videoCapabilities=n.videoCapabilities)}},{key:"_trySetServerCertificate",value:function(e,t){var n=this,r=this._certificate;return(r&&r.expiry>Date.now()?Promise.resolve(r):this._requestServerCertificate(e)).then((function(e){return t.setServerCertificate(e.contents)})).then((function(){return n})).catch((function(e){return re.warn("Error from setting server certificate",e),n}))}},{key:"_cacheServerCertificate",value:function(e){var t=this,n="";switch(e){case v.v.FAIRPLAY:n="fairplay";break;case v.v.WIDEVINE:n="widevine";break;default:return Promise.resolve(this)}return this._requestServerCertificate("".concat(this._unauthServerCertificateBase,"/").concat(n,"-license"),!1).then((function(){return t}),(function(e){return re.warn("Cannot precache server certificate",e),t}))}},{key:"_requestServerCertificate",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._pendingCertificateRequest)return this._pendingCertificateRequest;var r=this._transport.request("".concat(e,"/v1/application-certificate"),{authorize:n,responseType:"arraybuffer",parseResponseHeaders:!0,retry:{condition:function(e,t){return e.getStatusFamily()===t.SERVER_ERROR}}}).then((function(e){var n;if(!e.body)throw new TypeError("Response body is invalid");t._pendingCertificateRequest=null;var r=3600,i=null===(n=e.headers)||void 0===n?void 0:n.get("cache-control");if(i){var a=i.match(/(?:^|,|\s)max-age=(\d+)(?:,|$)/);a&&a[1]&&(r=1e3*parseInt(a[1],10))}return t._certificate={expiry:Date.now()+(r-600),contents:e.body},t._certificate}));return r}},{key:"_extractPlayReadyChallenge",value:function(e,t){var n,r=null,i=new Uint16Array(e),a=String.fromCharCode.apply(null,i);if(-1===a.indexOf("PlayReadyKeyMessage"))return re.info("Using unextracted PlayReady message."),e;var o=(new DOMParser).parseFromString(a,"application/xml"),s=o.getElementsByTagName("Challenge")[0],c=null===(n=null==s?void 0:s.childNodes[0])||void 0===n?void 0:n.nodeValue;if(c)try{r=atob(c);var u=o.getElementsByTagName("name"),l=o.getElementsByTagName("value");if(u.length!==l.length)throw new m(f.D.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")}catch(d){this.emit(p.j.EME_LICENSE_REQUEST_ERROR,{signal:t,error:d}),r=null}else this.emit(p.j.EME_LICENSE_REQUEST_ERROR,{signal:t,error:new m(f.D.EME_HEADER_KEY_VALUE_MISMATCH,"Mismatched header <name>/<value> pair in key message")});return r}},{key:"_onMessage",value:function(e,t){e.timeMap.generate.end=Date.now();var n="message"in t?t.message:null,r="messageType"in t?t.messageType:void 0;if(re.info("Got EME message event with type",r),n&&e.keySystem===v.v.PLAYREADY&&(n=this._extractPlayReadyChallenge(n,e.signal)),n)if(e.licenseServer){e.timeMap.request.start=Date.now();var i=e.licenseServer;e.keySystem===v.v.FAIRPLAY&&(i="".concat(i).concat(-1!==i.indexOf("?")?"&":"?","assetId=hex")),this._transport.request(i,{method:"POST",payload:n,responseType:"arraybuffer",retry:{condition:function(e,t){return 400!==e.status&&402!==e.status&&403!==e.status&&(!e.body||e.getStatusFamily()!==t.SUCCESS)}}}).then(this._handleLicenseResponse.bind(this,e))}else re.info("Ignoring message event: no licenseServer url");else re.info("Ignoring message event: no valid request payload")}},{key:"_handleLicenseResponse",value:function(e,t){var n,r=this,i=function(t){e.licenseServer&&(t.licenseServer=e.licenseServer),r.emit(p.j.EME_LICENSE_REQUEST_ERROR,{signal:e.signal,error:t})};if(e.timeMap.request.end=Date.now(),200!==t.status){var a;try{if(t.body){var o=new Uint8Array(t.body),s=String.fromCharCode.apply(String,o);a=JSON.parse(s).errorMsg}}catch(u){}402===t.status?this.emit(p.j.EME_LICENSE_REQUEST_CAPPED,{signal:e.signal,error:new E(f.D.CAPPING_USER_IS_CAPPED,"User is capped.")}):400===t.status&&"widevine error"===a?((n=m.fatal(f.D.EME_LICENSE_REQUEST_WIDEVINE_ERROR,"Widevine license server failed to parse request.")).status=t.status,n.shouldRefreshEndpoint=!0,i(n)):((n=new m(f.D.EME_LICENSE_REQUEST_FAILED_WITH_STATUS,"License request failed (".concat(a||"unknown",")"))).status=t.status,n.shouldRefreshEndpoint=400===t.status||403===t.status,i(n))}else{if(!t.body)return(n=new m(f.D.EME_LICENSE_REQUEST_EMPTY_RESPONSE,"Empty license response body")).status=t.status,void i(n);try{e.timeMap.update.start=Date.now(),e.keySession.update(t.body).catch((function(e){i(new m(f.D.EME_LICENSE_UPDATE_FAILED,e.message||"License update failed."))})),re.info("KeySession updated.")}catch(l){var c=l.message;i(new m(f.D.EME_LICENSE_UPDATE_FAILED,c||"License update failed."))}}}},{key:"_selectKeySystem",value:function(e){for(var t=this._preferredKeySystems,n=0,r=t.length;n<r;n++){var i=t[n];if(i&&i in e)return e[i]}return null}},{key:"_testMediaKeys",value:function(e){return new Promise((function(t){t(e.createMediaKeys())})).then((function(t){if(!t)return Promise.reject(m.fatal(f.D.EME_MEDIA_KEYS_NOT_SUPPORTED,"Cannot create MediaKeys from KeySystemAccess"));e.keySystem===v.v.FAIRPLAY&&t.setServerCertificate(new ArrayBuffer(0));try{if(!t.createSession())throw new Error("")}catch(r){var n=r.message;return Promise.reject(m.fatal(f.D.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED,n||"Cannot create MediaKeySession from KeySystemAccess"))}return Promise.resolve(e)}),(function(e){return re.error(e.name),Promise.reject(m.fatal(f.D.EME_MEDIA_KEYS_NOT_SUPPORTED,e.message||"Unknown error"))}))}},{key:"_saveSession",value:function(e){this._keySessions.push(e)}},{key:"destroySessions",value:function(){var e,t=[],n=ee(this._keySessions);try{for(n.s();!(e=n.n()).done;){var r=e.value;try{var i=r.keySession;if(!i)continue;r.onMessageListener&&i.removeEventListener(p.j.KEY_SESSION_MESSAGE,r.onMessageListener),r.onKeyStatusChangeListener&&i.removeEventListener(p.j.KEY_SESSION_STATUSES_CHANGE,r.onKeyStatusChangeListener);var a=Promise.resolve(i.close()).catch((function(e){re.warn("Failed to close KeySession",e)}));t.push(a),r.keySession=null,r.onMessageListener=null,r.onKeyStatusChangeListener=null,re.info("Closed KeySession")}catch(o){re.warn("Failed to close KeySession",o)}}}catch(s){n.e(s)}finally{n.f()}return this._keySessions=[],Promise.all(t)}},{key:"init",value:function(){var e,t=this,n=this._keySystemDeferred,r={},i=[],a=[],o=ee(J.y);try{for(o.s();!(e=o.n()).done;){var s=e.value;if(!s.label||!this._configFilter.test(s.label)){if(this._disallowCodecs){var c=oe(s,this._disallowCodecs);if(!c)continue;s=c}a.push(s)}}}catch(d){o.e(d)}finally{o.f()}for(var u in this._configs=a,v.v)if(Object.prototype.hasOwnProperty.call(v.v,u)){var l=u;i.push(navigator.requestMediaKeySystemAccess(v.v[l],a).then((function(e){r[e.keySystem]=e})).catch((function(){})))}return Promise.all(i).then(this._selectKeySystem.bind(this,r)).then((function(e){return e?t._testMediaKeys(e):Promise.reject(new m(f.D.EME_NO_SUPPORTED_KEYSYSTEM,"No supported keysystem was found."))})).then((function(e){return t._prepareConfiguration(e),n.resolve(e),t._precacheServerCertificate?t._cacheServerCertificate(e.keySystem):t})).catch((function(e){var r=e.code||f.D.EME_NO_SUPPORTED_KEYSYSTEM,i=e.message||"No supported keysystem";return n.reject(m.fatal(r,i)),n.promise.then((function(){return t}))}))}},{key:"createMediaKeys",value:function(e){var t=this;return this._keySystemDeferred.promise.then((function(e){return e.createMediaKeys()})).then((function(t){return Promise.all([e.setMediaKeys(t),t])})).then((function(n){var i=(0,r.Z)(n,2),a=(i[0],i[1]);if(!e.mediaKeys)throw new m(f.D.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED,"Failed to set MediaKeys on HTMLMediaElement");return t._configuration.promise.then((function(){var e=t._keySystemSettings;return e&&!t._noServerCertificate&&e.withCertificate?t._trySetServerCertificate(e.licenseServer,a):t}))}))}},{key:"removeMediaKeys",value:function(e){var t=this;return Promise.resolve(e.setMediaKeys(null)).then((function(){return t}))}},{key:"getKeySystemInfo",value:function(){return this._configuration.promise}},{key:"getKeySystemImpl",value:function(){return this._emeImpl}},{key:"createSessionWithParams",value:function(e){var t=this;return new Promise((function(n,r){re.info("Creating KeySession",e.keySystem);var i=e.mediaKeys.createSession(),a={generate:{start:0,end:0},request:{start:0,end:0},update:{start:0,end:0}},o=t._keySystemSettings&&t._keySystemSettings.licenseServer||void 0,s=t._onMessage.bind(t,{keySystem:e.keySystem,keySession:i,licenseServer:e.licenseServer||o,signal:e.signal,timeMap:a});i.addEventListener(p.j.KEY_SESSION_MESSAGE,s);var c=function(){re.info("KeyStatus change"),a.update.end=Date.now(),n({elapsed:{generate:Math.max(a.generate.end-a.generate.start,0),request:Math.max(a.request.end-a.request.start,0),update:Math.max(a.update.end-a.update.start,0)}})};return i.addEventListener(p.j.KEY_SESSION_STATUSES_CHANGE,c),t._saveSession({keySession:i,onMessageListener:s,onKeyStatusChangeListener:c}),re.info("Generating KeySession request",e.keySystem),a.generate.start=Date.now(),Promise.resolve(i.generateRequest(e.initDataType,e.initData.buffer)).catch((function(e){if(e){var t;switch(e.name){case"NotSupportedError":t=f.D.EME_NOT_SUPPORTED_ERROR;break;case"InvalidStateError":t=f.D.EME_INVALID_STATE_ERROR;break;default:t=f.D.EME_UNKNOWN_ERROR}r(new m(t,e.message||"Unknown error message."))}}))}))}}],[{key:"create",value:function(e){return new Promise((function(t){var r=z();if(!r)throw m.fatal(f.D.EME_API_NOT_SUPPORTED,"Platform does not support navigator.requestMediaKeySystemAccess");t(new n(Object.assign(Object.assign({},e),{emeImpl:r})).init())}))}}]),n}(u.vp)},31236:(e,t,n)=>{"use strict";n.d(t,{$:()=>c,M:()=>o});var r=n(12130);n(10817),n(71827),n(14936),n(28977),n(61025),n(26361),n(8090),n(28897),n(22554),n(81175),n(14042),n(47370),n(58984),n(78902),n(72511);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n,r,a,o=i(e);try{for(o.s();!(a=o.n()).done;){var s=a.value,c={audioCapabilities:[],videoCapabilities:[]},u=void 0,l=!1;if(null===(n=s.audioCapabilities)||void 0===n?void 0:n.length){l=!1;var d,p=i(s.audioCapabilities);try{for(p.s();!(d=p.n()).done;){var f=d.value;(u=f.contentType)&&(t(u)&&(c.audioCapabilities.push(f),l=!0))}}catch(m){p.e(m)}finally{p.f()}}if(null===(r=s.videoCapabilities)||void 0===r?void 0:r.length){l=!1;var v,h=i(s.videoCapabilities);try{for(h.s();!(v=h.n()).done;){var y=v.value;(u=y.contentType)&&(t(u)&&(c.videoCapabilities.push(y),l=!0))}}catch(m){h.e(m)}finally{h.f()}}if(l)return c}}catch(m){o.e(m)}finally{o.f()}return null}var s=/([^;]+)(?:;\s?codecs="(.*)")?/;function c(e){var t,n=null!==(t=e.match(s))&&void 0!==t?t:[],i=(0,r.Z)(n,3),a=i[1],o=void 0===a?"unknown":a,c=i[2];return{mimeType:o,codec:void 0===c?"unknown":c,contentType:e}}},32987:(e,t,n)=>{"use strict";var r;n.d(t,{D:()=>r}),function(e){e.CAPPING_USER_IS_CAPPED="CAPPING_USER_IS_CAPPED",e.EME_API_NOT_SUPPORTED="EME_API_NOT_SUPPORTED",e.EME_MEDIA_KEYS_NOT_SUPPORTED="EME_MEDIA_KEYS_NOT_SUPPORTED",e.EME_MEDIA_KEY_SESSION_NOT_SUPPORTED="EME_MEDIA_KEY_SESSION_NOT_SUPPORTED",e.EME_NO_SUPPORTED_KEYSYSTEM="EME_NO_SUPPORTED_KEYSYSTEM",e.EME_PLAYER_MEDIA_KEYS_SETTING_FAILED="EME_PLAYER_MEDIA_KEYS_SETTING_FAILED",e.EME_ERROR_UNKNOWN="EME_ERROR_UNKNOWN",e.EME_LICENSE_REQUEST_EMPTY_RESPONSE="EME_LICENSE_REQUEST_EMPTY_RESPONSE",e.EME_LICENSE_REQUEST_FAILED_WITH_STATUS="EME_LICENSE_REQUEST_FAILED_WITH_STATUS",e.EME_LICENSE_REQUEST_WIDEVINE_ERROR="EME_LICENSE_REQUEST_WIDEVINE_ERROR",e.EME_LICENSE_UPDATE_FAILED="EME_LICENSE_UPDATE_FAILED",e.EME_HEADER_KEY_VALUE_MISMATCH="EME_HEADER_KEY_VALUE_MISMATCH",e.EME_HEADER_MISSING_CHALLENGE="EME_HEADER_MISSING_CHALLENGE",e.EME_INIT_DATA_MALFORMED="EME_INIT_DATA_MALFORMED",e.EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM="EME_CANNOT_SET_CERTIFICATE_FOR_PLATFORM",e.EME_MEDIA_KEY_SESSION_V0_1B_ERROR="EME_MEDIA_KEY_SESSION_V0_1B_ERROR",e.EME_MEDIA_KEY_SESSION_SAFARI_ERROR="EME_MEDIA_KEY_SESSION_SAFARI_ERROR",e.EME_NO_SUPPORTED_CONFIGURATION="EME_NO_SUPPORTED_CONFIGURATION",e.EME_NOT_SUPPORTED_ERROR="EME_NOT_SUPPORTED_ERROR",e.EME_INVALID_STATE_ERROR="EME_INVALID_STATE_ERROR",e.EME_UNKNOWN_ERROR="EME_UNKNOWN_ERROR",e.DISALLOW_PROTECTED_TRACK_ERROR="DISALLOW_PROTECTED_TRACK_ERROR",e.FILE_FORMAT_NOT_SUPPORTED="FILE_FORMAT_NOT_SUPPORTED",e.FILE_MALFORMED_SEEKTABLE="FILE_MALFORMED_SEEKTABLE",e.FILE_MALFORMED_PSSH="FILE_MALFORMED_PSSH",e.FILE_NOT_RESOLVED="FILE_NOT_RESOLVED",e.FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_ONLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO="FRAGMENT_OFFLINE_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_ZERO="FRAGMENT_REQUEST_FAILED_WITH_ZERO",e.FRAGMENT_REQUEST_FAILED_WITH_STATUS="FRAGMENT_REQUEST_FAILED_WITH_STATUS",e.FRAGMENT_REQUEST_EMPTY_RESPONSE="FRAGMENT_REQUEST_EMPTY_RESPONSE",e.FRAGMENT_REQUEST_UNEXPECTED_LENGTH="FRAGMENT_REQUEST_UNEXPECTED_LENGTH",e.PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE="PLAYER_ATTEMPTED_VOLUME_OUT_OF_RANGE",e.PLAYER_BUFFER_QUOTA_EXCEEDED="PLAYER_BUFFER_QUOTA_EXCEEDED",e.PLAYER_CANNOT_FIND_PLAYABLE_URI="PLAYER_CANNOT_FIND_PLAYABLE_URI",e.PLAYER_INVALID_INTERNAL_STATE="PLAYER_INVALID_INTERNAL_STATE",e.PLAYER_MEDIA_ERROR="PLAYER_MEDIA_ERROR",e.PLAYER_PLAYBACK_ERROR="PLAYER_PLAYBACK_ERROR",e.MEDIA_ABORTED="MEDIA_ABORTED",e.MEDIA_DECODING_ERROR="MEDIA_DECODING_ERROR",e.MEDIA_NETWORK_ERROR="MEDIA_NETWORK_ERROR",e.MEDIA_NOT_SUPPORTED="MEDIA_NOT_SUPPORTED",e.LICENSE_RESOLVE_INVALID_RESPONSE="LICENSE_RESOLVE_INVALID_RESPONSE",e.LICENSE_RESOLVER_CANT_RESOLVE_URL="LICENSE_RESOLVER_CANT_RESOLVE_URL",e.LICENSE_RESOLVER_DEPRECATED_VERSION="LICENSE_RESOLVER_DEPRECATED_VERSION",e.LIST_PLAYER_NO_TRACK_PLAYER="LIST_PLAYER_NO_TRACK_PLAYER",e.LIST_PLAYER_NO_LIST="LIST_PLAYER_NO_LIST",e.LIST_PLAYER_INVALID_ARGUMENT="LIST_PLAYER_INVALID_ARGUMENT",e.LIST_PLAYER_FORBIDDEN="LIST_PLAYER_FORBIDDEN",e.STORAGE_ERROR="STORAGE_ERROR",e.STORAGE_FAILED_WITH_STATUS="STORAGE_FAILED_WITH_STATUS",e.STORAGE_RETURNED_NO_TRACKS="STORAGE_RETURNED_NO_TRACKS",e.STORAGE_TRACK_MANIFEST_FAILED="STORAGE_TRACK_MANIFEST_FAILED",e.STORAGE_TRACK_MANIFEST_EMPTY="STORAGE_TRACK_MANIFEST_EMPTY",e.STORAGE_VIDEO_MANIFEST_FAILED="STORAGE_VIDEO_MANIFEST_FAILED",e.TRACK_DATA_ALREADY_FINALIZED="TRACK_DATA_ALREADY_FINALIZED",e.TSV_SENDING_FAILED="TSV_SENDING_FAILED",e.PLAYBACK_STATS_SENDING_FAILED="PLAYBACK_STATS_SENDING_FAILED",e.PLAYBACK_START_SENDING_FAILED="PLAYBACK_START_SENDING_FAILED",e.UNKNOWN="UNKNOWN"}(r||(r={}))},56946:(e,t,n)=>{"use strict";var r;n.d(t,{j:()=>r}),function(e){e.KEY_SESSION_MESSAGE="message",e.KEY_SESSION_STATUSES_CHANGE="keystatuseschange",e.MEDIA_SOURCE_OPEN="sourceopen",e.MEDIA_SOURCE_CLOSE="sourceclose",e.SOURCE_BUFFER_UPDATE_END="updateend",e.MS_KEY_ADDED="mskeyadded",e.MS_KEY_ERROR="mskeyerror",e.MS_KEY_MESSAGE="mskeymessage",e.MS_NEEDKEY="msneedkey",e.WEBKIT_KEY_ADDED="webkitkeyadded",e.WEBKIT_KEY_ERROR="webkitkeyerror",e.WEBKIT_KEY_MESSAGE="webkitkeymessage",e.WEBKIT_NEEDKEY="webkitneedkey",e.V0_1B_KEY_ADDED="keyadded",e.V0_1B_KEY_ERROR="keyerror",e.V0_1B_KEY_MESSAGE="keymessage",e.V0_1B_NEEDKEY="needkey",e.MEDIA_CANPLAY="canplay",e.MEDIA_CANPLAYTHROUGH="canplaythrough",e.MEDIA_DURATIONCHANGE="durationchange",e.MEDIA_ENCRYPTED="encrypted",e.MEDIA_ENDED="ended",e.MEDIA_ERROR="error",e.MEDIA_LOADEDMETADATA="loadedmetadata",e.MEDIA_PAUSE="pause",e.MEDIA_PLAY="play",e.MEDIA_PLAYING="playing",e.MEDIA_SEEKING="seeking",e.MEDIA_TIMEUPDATE="timeupdate",e.MEDIA_WAITING="waiting",e.MEDIA_RATECHANGE="ratechange",e.MEDIA_RESIZE="resize",e.INTERNAL_ENCRYPTED="__encrypted",e.INTERNAL_PLAYER_CANPLAY="__canplay",e.INTERNAL_PLAYER_CANPLAYTHROUGH="__canplaythrough",e.INTERNAL_MEDIA_REQUIRES_DURATION="__requiresduration",e.INTERNAL_PLAYER_LOADED_METADATA="__loadedmetadata",e.BUFFER_APPEND_ERROR="append_error",e.BUFFER_STALLED="stalled",e.BUFFERING_START="buffering_start",e.BUFFERING_END="buffering_end",e.BUFFER_SOURCE_OPEN="source_open",e.BUFFER_SOURCE_CLOSE="source_close",e.BUFFER_QUOTA_EXCEEDED="quota_exceeded",e.FRAGMENT_APPENDED="fragment_appended",e.EME_LICENSE_REQUEST_ERROR="license_request_error",e.EME_LICENSE_REQUEST_CAPPED="license_request_capped",e.LIST_PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.LIST_PLAYER_BEFORE_LIST_CHANGE="before_list_change",e.LIST_PLAYER_BEFORE_NEXT="before_next",e.LIST_PLAYER_BEFORE_PLAYER_LOAD="before_player_load",e.LIST_PLAYER_BEFORE_PREVIOUS="before_previous",e.LIST_PLAYER_BEFORE_TRACK_LOAD="before_track_load",e.LIST_PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.LIST_PLAYER_BUFFER_STALLED="stalled",e.LIST_PLAYER_BUFFERING_START="buffering_start",e.LIST_PLAYER_BUFFERING_END="buffering_end",e.LIST_PLAYER_CAPPED="capped",e.LIST_PLAYER_CLEARED="cleared",e.LIST_PLAYER_DURATION_CHANGED="duration_changed",e.LIST_PLAYER_ERROR="error",e.LIST_PLAYER_ERROR_SYNC="error_sync",e.LIST_PLAYER_LIST_CHANGED="list_change",e.LIST_PLAYER_LIST_ENDED="list_ended",e.LIST_PLAYER_LOAD_VIDEO="load_video",e.LIST_PLAYER_MAX_LIST_ERRORS_REACHED="max_list_errors_reached",e.LIST_PLAYER_PAUSED="paused",e.LIST_PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.LIST_PLAYER_PLAYER_LOAD="player_load",e.LIST_PLAYER_PLAYING="playing",e.LIST_PLAYER_POSITION_CHANGED="position_changed",e.LIST_PLAYER_PROGRESS="progress",e.LIST_PLAYER_REPEAT_MODE_CHANGED="repeat_mode_changed",e.LIST_PLAYER_SHUFFLE_CHANGED="shuffle_changed",e.LIST_PLAYER_STOPPED="stopped",e.LIST_PLAYER_STOPPED_VIDEO="stopped_video",e.LIST_PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_TRACK_ENDED="track_ended",e.LIST_PLAYER_TRACK_LOADED="track_loaded",e.LIST_PLAYER_TRACK_TIMEOUT="track_timeout",e.LIST_PLAYER_TRACK_UNPLAYABLE="track_unplayable",e.LIST_PLAYER_DATA_CREATED="tracking_data_created",e.LIST_PLAYER_DATA_FINALIZED="tracking_data_finalized",e.LIST_PLAYER_VOLUME_CHANGED="volume_changed",e.LIST_PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.LIST_PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.LIST_PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.LIST_PLAYER_SEEK_HANDLED="list_player_seek_handled",e.LIST_PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.LIST_PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.LIST_PLAYER_SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.LOGGER_ERROR="error",e.PLAYER_AUTOPLAY_FAILED="player_autoplay_failed",e.PLAYER_BEFORE_LOAD="before_load",e.PLAYER_BEFORE_STOP="before_stop",e.PLAYER_BEFORE_VOLUME_CHANGE="before_volume_change",e.PLAYER_BUFFER_STALLED="stalled",e.PLAYER_BUFFERING_START="buffering_start",e.PLAYER_BUFFERING_END="buffering_end",e.PLAYER_CAN_PRELOAD="can_preload",e.PLAYER_CAPPED="capped",e.PLAYER_DURATION_CHANGED="duration_changed",e.PLAYER_ENDED="ended",e.PLAYER_ENDED_VIDEO="ended_video",e.PLAYER_ERROR="error",e.PLAYER_WARNING="warning",e.PLAYER_FIRST_BYTES="first_bytes",e.PLAYER_KEY_RECEIVED="key",e.PLAYER_LOAD="load",e.PLAYER_LOAD_VIDEO="load_video",e.PLAYER_LOADING_FAILED="loading_failed",e.PLAYER_PAUSED="paused",e.PLAYER_PLAY="play",e.PLAYER_PLAYING="playing",e.PLAYER_POSITION_CHANGED="position_changed",e.PLAYER_PRELOADING_ERROR="preloading_error",e.PLAYER_PROGRESS="progress",e.PLAYER_STALLED="stalled",e.PLAYER_STOPPED="stopped",e.PLAYER_STOPPED_VIDEO="stopped_video",e.PLAYER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.PLAYER_TIMEOUT="timeout",e.PLAYER_PLAYBACK_START="playback_start",e.PLAYER_TRACKING_DATA_CREATED="tracking_data_created",e.PLAYER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.PLAYER_VIDEO_ELEMENT_APPENDED="video_element_appended",e.PLAYER_VIDEO_ELEMENT_REMOVED="video_element_removed",e.PLAYER_VIDEO_PROFILE_CHANGED="video_profile_changed",e.PLAYER_DISPLAYED_CUES_CHANGED="displayed_cues_changed",e.PLAYER_SEEKING="seeking",e.PLAYER_FRAGMENT_FETCHED="fragment_fetched",e.PLAYER_FRAGMENT_FETCH_ERROR="fragment_fetch_error",e.PLAYER_VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.PLAYER_VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.PLAYER_PLAYBACK_SPEED_CHANGED="playback_speed_changed",e.PLAYER_SUBTITLE_LANGUAGES_LOADED="subtitle_languages_loaded",e.PLAYER_VIDEO_RESIZED="resize",e.PLAYER_MANAGER_READY="ready",e.TRACKER_PLAYBACK_START="playback_start",e.TRACKER_PLAYED_THRESHOLD_REACHED="played_threshold_reached",e.TRACKER_TRACKING_DATA_CREATED="tracking_data_created",e.TRACKER_TRACKING_DATA_FINALIZED="tracking_data_finalized",e.VIDEO_MANIFEST_RESOLVED="video_manifest_resolved",e.VIDEO_MANIFEST_RESOLVE_FAILED="video_manifest_resolve_failed",e.ABR_MANAGER_BITRATE_CHANGE="bitrate_change"}(r||(r={}))},28677:(e,t,n)=>{"use strict";var r;n.d(t,{v:()=>r}),function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready",e.PLAYREADY_HARDWARE="com.microsoft.playready.hardware",e.FAIRPLAY="com.apple.fps.1_0",e.INVALID_SPOTIFY_KEY="com.spotify.invalid"}(r||(r={}))},41401:(e,t,n)=>{"use strict";n(11584);var r,i,a,o=n(87995),s=n(72558),c=n(7403),u=n(56141),l=n(48466),d=(n(61025),n(259),n(71827),n(82798),n(58984),n(47876),n(28897),n(78902),n(45830),n(64891),n(2637),n(58254),n(22554),n(79694),n(72511),n(89546)),p=n.n(d);function f(e){return"string"!=typeof e}!function(e){e.af="af",e.am="am",e.ar="ar",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es419="es-419",e.es="es",e.et="et",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhTW="zh-TW",e.zu="zu"}(r||(r={})),function(e){e.AR="، ",e.FA="، ",e.EN=", "}(i||(i={})),function(e){e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other"}(a||(a={}));var v={},h=function(e,t){try{return(v[e]||(v[e]=new Intl.PluralRules(e))).select(t)}catch(n){return a.OTHER}};function y(e){return"number"==typeof e?e.toString():e.replace(/\$/,"$$$$")}var m=function(e){return"ar"===e?"ar-u-nu-latn":e},_=function(){function e(){(0,c.Z)(this,e),(0,l.Z)(this,"_relativeTimeFormat",void 0===Intl.RelativeTimeFormat?null:new Intl.RelativeTimeFormat),(0,l.Z)(this,"_dateTimeFormats",new Map),this._dictionary={},this._locale=r.en}return(0,u.Z)(e,[{key:"getDateTimeFormat",value:function(e){var t=JSON.stringify(Object.keys(e).sort().map((function(t){return(0,l.Z)({},t,e[t])}))),n=this._dateTimeFormats.get(t);return void 0===n&&(n=new Intl.DateTimeFormat(m(this._locale),e),this._dateTimeFormats.set(t,n)),n}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"setDictionary",value:function(e){this._dictionary=e}},{key:"setLocale",value:function(e){this._locale=e,this._dateTimeFormats.clear()}},{key:"getLocale",value:function(){return this._locale}},{key:"getSmartlingLocale",value:function(){var e=this._locale;return p()[e]||e}},{key:"toLocaleLowerCase",value:function(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}},{key:"toLocaleUpperCase",value:function(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}},{key:"get",value:function(e){for(var t=(e in this._dictionary?this._dictionary[e]:e),n="",r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(f(t)){var o=i[0],c=h(this._locale,parseInt(o,10)),u=t[c];void 0!==u?n=u:t.other&&(n=t.other)}else n=t;if(/%\d%/.test(n)){var l=["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"];if(!l.includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}if((null==i?void 0:i.length)>0)for(var d=0;d<i.length;d++){var p=i[d];if(null!=p)if("string"==typeof p)n=n.replace("{".concat(d,"}"),y(p)).replace("%".concat(d,"%"),y(p));else if("number"==typeof p){var v=this.formatNumber(p);n=n.replace("{".concat(d,"}"),v).replace("%".concat(d,"%"),v)}else if("object"===(0,s.Z)(p))for(var m=0,_=Object.keys(p);m<_.length;m++){var E=_[m],b=p[E];n=n.replace("%".concat(E,"%"),y(b))}}return n}},{key:"getSeparator",value:function(){switch(this._locale){case r.ar:return i.AR;case r.fa:return i.FA;default:return i.EN}}},{key:"formatNumber",value:function(e,t){return e.toLocaleString(m(this._locale),t)}},{key:"formatNumberCompact",value:function(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={year:"numeric",month:"long",day:"numeric"},r=t||n;return this.getDateTimeFormat(r).format(e)}},{key:"formatRelativeDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Date(Date.now()),r=(e=new Date(e)).getTime()-n.getTime(),i=Math.abs(r)<2592e6;if(i&&null!==this._relativeTimeFormat){var a=E(r),o=a.days,s=a.hours,c=a.minutes,u=a.seconds;return o||s||c?o||s?o?this._relativeTimeFormat.format(o,"days"):this._relativeTimeFormat.format(s,"hours"):this._relativeTimeFormat.format(c,"minutes"):this._relativeTimeFormat.format(u,"seconds")}return this.formatDate(e,t)}},{key:"__resetForTests",value:function(){this._dictionary={},this._locale=r.en,v={}}}]),e}();function E(e){return{seconds:Math.round(e/1e3),minutes:Math.round(e/1e3/60),hours:Math.round(e/1e3/60/60),days:Math.round(e/1e3/60/60/24)}}var b=new _;const g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.documentElement.classList.add("no-focus-outline"),e.addEventListener("keydown",(function(t){"Tab"===t.key&&e.documentElement.classList.remove("no-focus-outline")}),!0),e.addEventListener("mousedown",(function(){e.documentElement.classList.add("no-focus-outline")}),!0)};var S=n(72128),k=n(24190),T=n(88158),A=n.n(T),R=(n(31711),n(77646)),w=n(95076),O=n(94719),P=n(36725),N=n(13609),I=(0,O.iv)("color:","rgb(255, 255, 255)",";",""),D="\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n",L=(0,N.iv)(["",""],D),C=(0,O.iv)("h1,h2{margin:0;font-size:initial;font-weight:normal;}.no-focus-outline{*:focus{outline:0;}}button{margin:0;border:0;padding:0;color:inherit;background-color:transparent;cursor:pointer;}a{",I,";text-decoration:none;}button{user-select:none;}",""),M=(0,O.iv)("body{",I,";}",C,";",""),x=(0,O.iv)("body{",I,";}",C,";",""),j=function(e){var t=e.width,n=e.breakPointType,r=void 0===n?"max-width":n;return function(){return(0,N.iv)(["@media screen and (",":","px){","}"],r,t,N.iv.apply(void 0,arguments))}},U={width:479},Z={width:589},K={width:1024,breakPointType:"min-width"},Y={small:j({width:375}),medium:j(U),large:j(Z),xLarge:j(K)},F=152,B=352,G=360,H=510,W={width:{small:"@media (max-width: 300px)",medium:"@media (max-width: 520px)"},height:{small:"@media (max-height: ".concat(232-1,"px)"),medium:"@media (max-height: ".concat(B-1,"px)")}},q=16,V={small:216,large:272},z=n(39401),Q=(n(85529),n(59496)),J=(n(18138),n(62560),n(44680)),X=n(33951),$=(n(27433),n(89674),n(75108)),ee=n(61351),te=n(28280);const ne="xgKxeaiofRuIttgPK2rL";var re=n(4637);const ie=function(){return(0,re.jsx)("div",{className:ne})};var ae=n(49883),oe=n(25930);const se="zxky3zhmh_vhWlndRKVG",ce="ydKMFPgNHlpYPxfI_zRw",ue="rcXJ6qSCG2uxq1oaWdme";var le=n(84875),de=n.n(le),pe=(0,Q.createContext)(new _),fe=function(e){var t=e.instance,n=e.children;return(0,re.jsx)(pe.Provider,{value:t,children:n})};function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,te.Z)(e);if(t){var i=(0,te.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,ee.Z)(this,n)}}var he=function(e){(0,$.Z)(n,e);var t=ve(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this,e)).state={showLoading:!1},r}return(0,u.Z)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this;!0===this.props.isLoading&&!1===e.isLoading?this.tickToShowLoading=setTimeout((function(){n.tickToShowLoading=null,!0===n.props.isLoading&&n.setState({showLoading:!0})}),this.props.maxTimeToNotShowLoading||200):!1===this.props.isLoading&&!0===e.isLoading&&(this.tickToShowLoading&&clearTimeout(this.tickToShowLoading),!0===this.state.showLoading&&(this.tickToHideLoading||setTimeout((function(){n.setState({showLoading:!1})}),300))),!0===this.state.showLoading&&!1===t.showLoading&&(this.tickToHideLoading=setTimeout((function(){n.tickToHideLoading=null,!1===n.props.isLoading&&n.setState({showLoading:!1})}),300))}},{key:"render",value:function(){var e=null,t=this.props,n=t.isPaused,r=t.isDisabled,i=t.className,a=t.onClick,o=this.context,s=this.state.showLoading,c=o.get("page.loading");return r&&(c=o.get("spe.error_heading")),s?(c=o.get("page.loading"),e=(0,re.jsx)(ie,{})):n?(c=o.get("spe.play"),e=(0,re.jsx)(ae.z,{className:ce,title:c})):(c=o.get("spe.pause"),e=(0,re.jsx)(oe.p,{className:ce,title:c})),(0,re.jsx)("button",{"data-testid":"play-pause-button",className:de()(i,se,(0,l.Z)({},ue,r)),onClick:a,"aria-label":c,tabIndex:0,children:e})}}]),n}(Q.Component);(0,l.Z)(he,"contextType",pe);const ye=he;n(83966),n(32905);var me=n(25937),_e=n(12130),Ee=n(43565),be=(n(7747),n(44437),n(61942),n(72553),6e4),ge=36e5,Se=function(e){return e<10?"0".concat(e):"".concat(e)};const ke=function(e){var t=e<0,n=Math.abs(e),r=Math.floor(n/ge),i=Math.floor(n%ge/be)||0,a=Math.floor(n%be/1e3)||0,o=t?"-":"",s=[r?"".concat(r):"",Se(i),Se(a)].filter((function(e){return e})).join(":");return"".concat(o).concat(s)};const Te="LoRSYk2JiA5YVQFSVr0E",Ae="Iq9ydkFCh_u8qi5h53nA",Re="ytK6vAIUk_NYyJGoBXuQ",we="ybaz2YjbycAlTUyh6Tan",Oe="mgqTJHDGUF3Dtb7wB_rX",Pe="dyoqrbn9HoBBdAbiaK1n",Ne="EcsCuEycLdH3OTMxPwEm";function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,te.Z)(e);if(t){var i=(0,te.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,ee.Z)(this,n)}}var De=function(e){(0,$.Z)(n,e);var t=Ie(n);function n(e){var r,i;return(0,c.Z)(this,n),r=t.call(this,e),(0,l.Z)((0,Ee.Z)(r),"handleMove",(function(e){if(r.props.enabled&&(/^mouse(down|move)$/i.test(e.type)&&0===e.button||"touchmove"===e.type)){var t=r._getEventCoordinates(e),n=(0,_e.Z)(t,2),i=n[0],a=n[1];r.dragStartX=i,r.dragStartY=a;var o=r._extractRelativePos(i);r.throttledMouseMove({pageX:i}),r.props.onDragging&&r.props.onDragging({percentage:o,id:r.state.id,ended:!1})}})),(0,l.Z)((0,Ee.Z)(r),"handleMouseMove",(function(e){if(r.props.enabled){var t=r._getEventCoordinates(e),n=(0,_e.Z)(t,1)[0];r.throttledMouseMove({pageX:n})}})),(0,l.Z)((0,Ee.Z)(r),"handleStart",(function(){r.props.enabled&&r.setState({isHovering:!0,id:Date.now()})})),(0,l.Z)((0,Ee.Z)(r),"handleLeave",(function(){r.props.enabled&&r.setState({isHovering:!1,id:r.state.id})})),(0,l.Z)((0,Ee.Z)(r),"handleEnd",(function(e){if(r.props.enabled){var t=r._getEventCoordinates(e),n=(0,_e.Z)(t,1)[0],i=r._extractRelativePos(n);r.props.onDragging&&r.props.onDragging({percentage:i,id:r.state.id,ended:!0})}})),r.container=Q.createRef(),r.state={isHovering:!1,id:0},r.throttledMouseMove=(i=function(e){var t=e.pageX,n=r._extractRelativePos(t);r.setState({hoverPercentage:n})},function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!1;return function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];t=o,r||(n||i.apply(i,o),r=!0,window.setTimeout((function(){r=!1,n&&i.apply(i,t)}),e))}})(50),r}return(0,u.Z)(n,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.isDragging&&!e.isDragging?(["mousemove","touchmove"].forEach((function(e){return document.addEventListener(e,t.handleMove)})),["mouseup","touchend"].forEach((function(e){return document.addEventListener(e,t.handleEnd)}))):!this.props.isDragging&&e.isDragging&&(["mousemove","touchmove"].forEach((function(e){return document.removeEventListener(e,t.handleMove)})),["mouseup","touchend"].forEach((function(e){return document.removeEventListener(e,t.handleEnd)})))}},{key:"componentWillUnmount",value:function(){var e=this;["mousemove","touchmove"].forEach((function(t){return document.removeEventListener(t,e.handleMove)})),["mouseup","touchend"].forEach((function(t){return document.removeEventListener(t,e.handleEnd)}))}},{key:"isTouchEventType",value:function(e){return null==e?void 0:e.type.includes("touch")}},{key:"_getEventCoordinates",value:function(e){var t,n;if(this.isTouchEventType(e)){var r=void 0===e.originalEvent?e:e.originalEvent,i=r.touches[0]||r.changedTouches[0];t=i.pageX,n=i.pageY}else t=e.pageX,n=e.pageY;return[t,n]}},{key:"_extractRelativePos",value:function(e){var t,n=null===(t=this.container.current)||void 0===t?void 0:t.getBoundingClientRect();if(!n)return 0;var r=n.right-n.left;return Math.max(0,Math.min((e-n.left)/r,1))}},{key:"render",value:function(){var e=this.props,t=e.enabled,n=e.max,r=e.current,i=e.isDragging,a=e.withOverhead,o=e.tooltip,s=this.state,c=s.isHovering,u=s.hoverPercentage,d=Math.max(0,Math.min(1,(null!=r?r:0)/(n||1))),p={transform:"translateX(-".concat(100-100*(c?u:0),"%)")},f={left:"".concat(100*(c?u:0),"%"),zIndex:1},v=c&&n?n*u:0,h={transform:"translateX(-".concat(100-100*d,"%)")},y=t&&(c||i),m={left:"".concat(100*d,"%")},_=c&&void 0!==n&&n>0;return(0,re.jsxs)("div",{role:"progressbar",tabIndex:0,ref:this.container,onMouseDown:this.handleMove,onMouseEnter:this.handleStart,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleLeave,onTouchStart:this.handleStart,onTouchMove:this.handleMove,onTouchEnd:this.handleLeave,className:a?Ae:Te,children:[_&&o&&(0,re.jsx)(o,{style:f,children:ke(v)}),(0,re.jsxs)("div",{className:we,children:[(0,re.jsx)("div",{className:Re,style:p}),(0,re.jsx)("div",{id:"progress-bar-line",style:h,className:Oe})]}),(0,re.jsx)("div",{id:"progress-bar-slider",className:de()(Pe,(0,l.Z)({},Ne,y)),style:m})]})}}]),n}(Q.Component);const Le=De;N.ZP.div.withConfig({displayName:"ProgressBar__Container",componentId:"sc-1iew7bu-0"})(["display:flex;position:relative;margin:0 ",";-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:100%;"],X.nuo),N.ZP.div.withConfig({displayName:"ProgressBar__ProgressBarWrapper",componentId:"sc-1iew7bu-1"})(["position:absolute;top:0px;width:100%;height:100%;"]),N.ZP.div.withConfig({displayName:"ProgressBar__TooltipContainer",componentId:"sc-1iew7bu-2"})(["position:absolute;top:-36px;left:0;transform:translate(-50%,0%);will-change:left;"]),(0,N.ZP)(me.u).withConfig({displayName:"ProgressBar__TooltipStyled",componentId:"sc-1iew7bu-3"})(["border-radius:4px;"]);var Ce="PAUSE",Me="PLAY",xe="TOGGLE_PLAY",je="PLAY_INDEX",Ue="PLAYBACK_STATE_CHANGED",Ze="PLAYBACK_ERROR",Ke="SEEK",Ye="SEEK_BACK",Fe="SEEK_FORWARD",Be="PLAY_NEXT",Ge="PLAY_PREVIOUS",He="SET_VOLUME",We="SET_CURRENT_PREVIEW_TRACK_INDEX;",qe="audio",Ve="video",ze="NONE";function Qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe;return{type:xe,mediaType:e}}function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qe;return{type:je,index:e,mediaType:t}}function Xe(){return{type:Ce}}function $e(e){return{type:He,volume:e}}function et(e){return{type:Ke,percentage:e}}var tt,nt=n(4706);N.ZP.div.withConfig({displayName:"Timestamp__TimestampWrapper",componentId:"sc-9uuo1p-0"})(["margin:0 ",";"," cursor:pointer;",""],X.dly,L,(function(e){return e.alwaysVisible?"":Y.small(tt||(tt=(0,nt.Z)(["display: none;"])))})),N.ZP.div.withConfig({displayName:"PlayControls__PlayControlsWrapper",componentId:"sc-1jua3er-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;background-color:",";opacity:0;touch-action:pan-y;",""],(function(e){return e.backgroundColor}),(function(e){return e.isMounted?"\n  transition: opacity ease-out 0.4s;\n  opacity: 1;\n  ":""})),N.ZP.div.withConfig({displayName:"PlayControls__ControlsSection",componentId:"sc-1jua3er-1"})(["width:100%;display:flex;align-items:center;justify-content:space-between;position:relative;height:48px;"]),N.ZP.div.withConfig({displayName:"PlayControls__ProgressSection",componentId:"sc-1jua3er-2"})(["position:relative;display:block;width:100%;height:32px;"]),N.ZP.div.withConfig({displayName:"PlayControls__ControlArea",componentId:"sc-1jua3er-3"})(["display:flex;flex:1;align-items:center;",""],(function(e){return"justify-content: ".concat(e.justifyContent,";")})),N.ZP.div.withConfig({displayName:"PlayControls__PlayButtonWrapper",componentId:"sc-1jua3er-4"})(["position:relative;width:32px;height:32px;padding:6px;"]),(0,N.ZP)(J.E).withConfig({displayName:"PlayControls__ButtonIconStyled",componentId:"sc-1jua3er-5"})(["cursor:pointer;> svg{padding:",";}"],X.nuo),N.ZP.div.withConfig({displayName:"ReplayControls__ReplayControlsContainer",componentId:"sc-1cqjp9p-0"})(["border-radius:8px;padding:"," "," 0 ",";background-color:",";opacity:0;",""],X.nuo,X.nuo,X.nuo,(function(e){return e.backgroundColor}),(function(e){return e.isMounted?"\n  transition: opacity ease-out 0.4s;\n  opacity: 1;\n  ":""})),N.ZP.div.withConfig({displayName:"Controls__ControlsWrapper",componentId:"sc-dmrzmb-0"})(["z-index:var(--controls-layer);"]),n(26361);function rt(e){return null!=e&&e.sources?e.sources.sort((function(e,t){return null===e.width||null===t.width?0:e.width>t.width?-1:e.width<t.width?1:0})):[]}var it=n(10154);n(31603),n(28129),n(71832),n(4203);n(88585);function at(e){return!!e&&("function"!=typeof e.toOpenURL&&"function"==typeof e.toURL)}var ot=n(71460),st=function(e,t,n){return n&&e.searchParams.set("t",n.toString()),t&&(e.searchParams.has("utm_source")||e.searchParams.set("utm_source",t)),e.searchParams.has("utm_medium")||e.searchParams.set("utm_medium",function(){var e;if("undefined"==typeof window)return!1;if(void 0!==window.orientation)switch(window.orientation){case 0:case 180:e=window.screen.width;break;default:e=window.screen.height}else{var t=window.screen.orientation&&window.screen.orientation.type||window.screen.msOrientation||"";if(0===t.indexOf("portrait"))e=window.screen.width;else{if(0!==t.indexOf("landscape"))return!1;e=window.screen.height}}return e<=432}()?"mobile":"desktop"),e};function ct(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new URL("undefined"!=typeof location&&location.href?location.href:"https://open.spotify.com"),r=null;if(e){var i=at(e)?e.toURL():e.toOpenURL();r=new URL(i),t&&n.searchParams.forEach((function(e,t){r.searchParams.set(t,e)}))}else r=n,t||(r.search="");r.searchParams.delete("nd"),r.searchParams.delete("fallback"),r.searchParams.set("go","1");var a=(0,ot.Z)("config");return"string"==typeof(null==a?void 0:a.correlationId)&&r.searchParams.append("sp_cid",a.correlationId),r}function ut(e,t){var n=ct(e,t);return n.searchParams.set("fallback","getapp"),n}function lt(e){if(null===e||null===e.positionAsOfTimestamp||null===e.duration)return null;var t=e.timestamp,n=e.positionAsOfTimestamp,r=e.duration,i=e.speed,a=e.hasContext,o=e.isPaused,s=e.isBuffering;if(!a||o||s)return n;var c=(Date.now()-t)*(null!=i?i:0);return Math.min(n+c,r)}var dt=function(e){switch(e){case"episode":case"track":return!1;default:return!0}};function pt(e){var t=(0,R.v9)((function(e){var t;return{entity:e.data.entity,playbackResumeSeconds:Math.floor((null!==(t=lt(e.playback))&&void 0!==t?t:0)/1e3),embeddedEntityType:e.settings.entityContext,embeddedEntityUri:e.data.embeded_entity_uri}})),n=t.entity,r=t.playbackResumeSeconds,i=t.embeddedEntityType,a=t.embeddedEntityUri,o=(0,Q.useState)({selectedEntity:"",compositeEntity:"",embeddedEntity:"",cta:""}),s=(0,_e.Z)(o,2),c=s[0],u=s[1];return(0,Q.useEffect)((function(){var t=null==n?void 0:n.uri,o=dt(i)?a:null==n?void 0:n.relatedEntityUri,s=function(e){var t;return null!==(t=e?(0,it.EC)(e):null)&&void 0!==t?t:void 0},c={compositeEntity:{deepLink:st(ct(s(o),!1),e).toString(),storeLink:st(ut(s(o),!1),e).toString()},selectedEntity:{deepLink:st(ct(s(t),!1),e,r).toString(),storeLink:st(ut(s(t),!1),e,r).toString()}},l=dt(i)?c.compositeEntity:c.selectedEntity;u({selectedEntity:c.selectedEntity.deepLink,compositeEntity:c.compositeEntity.deepLink,embeddedEntity:l.deepLink,cta:l.storeLink})}),[e,n,r,i,a]),c}var ft,vt,ht,yt,mt,_t,Et,bt=n(2592),gt=(N.ZP.div.withConfig({displayName:"Upsell__UpsellCard",componentId:"sc-41bqgk-0"})(["background-color:",";border-radius:8px;padding-block:",";padding-inline:",";transition:all 0.1s ease-in;transition-property:opacity,margin-bottom;pointer-events:initial;",";margin-bottom:",";z-index:var(--upsell-layer);"," @media screen and (max-width:430px){padding-block:",";padding-inline:",";}",""],X.Snx,X.g4V,X.o78,L,X.o78,Y.large(ft||(ft=(0,nt.Z)(["\n    margin-bottom: ","\n  "])),X.dly),X.dly,X.o78,Y.small(vt||(vt=(0,nt.Z)(["\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: 0;\n    border-radius: 0;\n    display: flex;\n    background-color: ",";\n    padding: 0 "," ",";\n    align-items: center;\n  "])),X.Snx,X.o78,X.uOY)),(0,N.ZP)(bt.D).withConfig({displayName:"Upsell__UpsellMessage",componentId:"sc-41bqgk-1"})(["flex:1;margin:0 "," 0 0;display:flex;align-items:center;",""],X.g4V,Y.small(ht||(ht=(0,nt.Z)(["\n    display: block;\n    margin: 0;\n    margin-bottom: ",";\n  "])),X.dly)),N.ZP.div.withConfig({displayName:"Upsell__UpsellTypeSmallMedium",componentId:"sc-41bqgk-2"})(["display:none;"," ",""],Y.large(yt||(yt=(0,nt.Z)(["\n    display: flex;\n  "]))),Y.small(mt||(mt=(0,nt.Z)(["\n    display: block;\n  "])))),N.ZP.div.withConfig({displayName:"Upsell__UpsellTypeLarge",componentId:"sc-41bqgk-3"})(["display:flex;",""],Y.large(_t||(_t=(0,nt.Z)(["\n    display: none;\n  "])))),n(91082));N.ZP.div.withConfig({displayName:"VideoContainer__VideoElement",componentId:"sc-1h650u7-0"})(["position:absolute;top:0;bottom:0;left:0;right:0;background-color:",";& video{position:absolute;width:100%;height:100%;top:0;bottom:0;left:0;right:0;}"],(0,gt.NE)("backgroundElevatedBase")),N.ZP.div.withConfig({displayName:"VideoContainer__Wrapper",componentId:"sc-1h650u7-1"})(["position:absolute;top:0;bottom:0;left:0;right:0;display:flex;align-items:center;flex-direction:column;padding:",";visibility:",";&:before{position:absolute;content:'';width:100%;height:112px;top:0;z-index:var(--protection-gradient-layer);pointer-events:none;background:",";}",";"],X.g4V,(function(e){return e.isVisible?"visible":"hidden"}),(function(e){return e.isVisible?"linear-gradient(180deg, ".concat(X.ajA," 40%, ").concat(X.X33," 100%)"):"none"}),Y.medium(Et||(Et=(0,nt.Z)(["\n    padding: ",";\n    &:before {\n      height: 96px;\n    }\n  "])),X.dly));function St(e){return kt.apply(this,arguments)}function kt(){return kt=(0,k.Z)(A().mark((function e(t){var n,r,i,a,o=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:document.body,!("clipboard"in navigator)){e.next=21;break}if(e.prev=2,"string"!=typeof t){e.next=7;break}return e.next=6,navigator.clipboard.writeText(t);case 6:return e.abrupt("return",e.sent);case 7:if("undefined"!=typeof ClipboardItem&&!(0,s.Z)(ClipboardItem)||!navigator.clipboard.write){e.next=11;break}return e.next=10,navigator.clipboard.write([new ClipboardItem({"text/plain":t.then((function(e){return new Blob([e],{type:"text/plain"})}))})]);case 10:return e.abrupt("return",e.sent);case 11:return e.next=13,t;case 13:return r=e.sent,e.next=16,navigator.clipboard.writeText(r);case 16:return e.abrupt("return",e.sent);case 19:e.prev=19,e.t0=e.catch(2);case 21:if(null!==n){e.next=23;break}throw new Error("Node is null, copy cannot be performed.");case 23:if(i="","string"!=typeof t){e.next=28;break}i=t,e.next=31;break;case 28:return e.next=30,t;case 30:i=e.sent;case 31:return(a=document.createElement("textarea")).value=i,a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",n.appendChild(a),a.select(),document.execCommand("copy"),n.removeChild(a),e.abrupt("return",Promise.resolve());case 41:case"end":return e.stop()}}),e,null,[[2,19]])}))),kt.apply(this,arguments)}var Tt,At=(0,Q.createContext)({instance:null}),Rt=n(47871);function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,te.Z)(e);if(t){var i=(0,te.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,ee.Z)(this,n)}}!function(e){e.UPDATE_ITEM="update_item"}(Tt||(Tt={}));var Ot,Pt,Nt,It,Dt=function(e){(0,$.Z)(n,e);var t=wt(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,u.Z)(n)}(Rt.vp);function Lt(e,t){var n,r=(0,Q.useContext)(At).instance,i=(0,Q.useState)(null!==(n=null==r?void 0:r.containsSync(e))&&void 0!==n?n:t),a=(0,_e.Z)(i,2),o=a[0],s=a[1],c=(0,R.v9)((function(e){return e.settings.session.isAnonymous})),u=void 0!==o,l=(0,Q.useCallback)(function(){var t=(0,k.Z)(A().mark((function t(n){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,null==r?void 0:r.add(e);case 3:t.next=7;break;case 5:return t.next=7,null==r?void 0:r.remove(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,r]);return(0,Q.useEffect)((function(){var t=void 0;if(r&&!c)if(u){var n=function(t){var n=t.data;e===n.uri&&s(n.isInLibrary)};r.getEvents().addListener(Tt.UPDATE_ITEM,n),t=function(){r.getEvents().removeListener(Tt.UPDATE_ITEM,n)}}else r.contains(e).then((function(e){var t=(0,_e.Z)(e,1)[0];return s(t)}));return t}),[r,c,e,u]),[null!=o&&o,l]}N.ZP.div.withConfig({displayName:"OverflowMenu__MenuModal",componentId:"sc-1dena4d-0"})(["position:fixed;top:0;bottom:0;left:0;right:0;background-color:",";z-index:var(--overflow-menu-layer);"],X.ajA),N.ZP.div.withConfig({displayName:"OverflowMenu__MenuWrapper",componentId:"sc-1dena4d-1"})(["",";display:flex;flex-direction:column;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;padding:"," ",";",";",";",""],(function(e){return"background: ".concat(e.backgroundColor)}),X.o78,X.g4V,L,Y.medium(Ot||(Ot=(0,nt.Z)(["\n    padding: ",";\n  "])),X.dly),Y.xLarge(Pt||(Pt=(0,nt.Z)(["\n    max-width: ","px;\n    max-height: 25vh;\n    border-radius: ","\n  "])),(K.width-48).toString(),X.dly)),N.ZP.div.withConfig({displayName:"OverflowMenu__Content",componentId:"sc-1dena4d-2"})(["display:flex;flex:1;align-content:center;overflow:hidden;flex-direction:column;justify-content:center;"]),N.ZP.div.withConfig({displayName:"OverflowMenu__OptionsWrapper",componentId:"sc-1dena4d-3"})(["display:grid;grid-template-columns:50% 50%;max-height:128px;> :only-child{grid-column-start:1;grid-column-end:3;}"," "," & .icon-check{opacity:0;position:absolute;transition:transform 0.3s ease-in-out,opacity 0.3s ease-in-out;transform:rotateY(180deg) scale(1.2);}& .icon-share{transition:transform 0.4s ease-in-out,opacity 1s ease-in-out;transform:scale(1);}& .animate{& .icon-check{opacity:1;transform:rotateY(0deg) scale(1);}& .icon-share{opacity:0;transform:scale(0);}}"],Y.medium(Nt||(Nt=(0,nt.Z)(["\n    max-height: 64px;\n    grid-template-columns: 100%;\n    > :not(:first-child) {\n      display: none;\n    }\n  "]))),Y.small(It||(It=(0,nt.Z)(["\n    max-height: 64px;\n  "])))),N.ZP.a.withConfig({displayName:"OverflowMenu__MenuItem",componentId:"sc-1dena4d-4"})(["border-radius:",";color:",";display:flex;align-items:center;cursor:pointer;position:relative;background-color:",";margin:",";padding:",";white-space:nowrap;&:hover{background:",";}& > svg{margin-right:",";}"],X.hM$,X.ixZ,X.On1,X.hM$,X.o78,X.vTr,X.nuo),N.ZP.span.withConfig({displayName:"OverflowMenu__MenuItemText",componentId:"sc-1dena4d-5"})(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),(0,N.ZP)(J.E).withConfig({displayName:"OverflowMenu__CloseButton",componentId:"sc-1dena4d-6"})(["margin:",";display:flex;justify-content:flex-end;"],X.dly),N.ZP.div.withConfig({displayName:"OverflowMenu__CookiePolicy",componentId:"sc-1dena4d-7"})(["flex:0;display:flex;align-items:flex-end;"]);var Ct;!function(e){e.XSMALL="XSMALL",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e.XLARGE="XLARGE"}(Ct||(Ct={}));n(34012),n(41611),n(63574),n(24180);var Mt,xt=n(73023);function jt(e){return!("undefined"==typeof window)&&e instanceof HTMLElement}var Ut={subscribersByElement:new WeakMap,get resizeObserver(){return Mt||(Mt=new xt.Z((function(e){Array.isArray(e)&&e.forEach((function(e){var t,n={width:Math.round(e.contentRect.width),height:Math.round(e.contentRect.height)};(null!==(t=Ut.subscribersByElement.get(e.target))&&void 0!==t?t:new Set).forEach((function(e){e(n)}))}))}))),Mt}};function Zt(e){var t=e.onResize,n=e.refOrElement,r=e.observeOnly,i=(0,Q.useRef)(t);i.current=t;var a=(0,Q.useRef)(r);a.current=r;var o=(0,Q.useRef)({width:void 0,height:void 0}),s=(0,Q.useCallback)((function(e){if(i.current){var t=o.current.width!==e.width,n=o.current.height!==e.height;("width"===a.current&&t||"height"===a.current&&n||!a.current&&(t||n))&&i.current(e),o.current.width=e.width,o.current.height=e.height}}),[]),c=function(e){var t,n=e.refOrElement,r=e.subscriber,i=null,a=(0,Q.useRef)(null),o=(0,Q.useRef)(null),s=(0,Q.useRef)(null),c=(0,Q.useRef)(),u=(0,Q.useRef)(r);u.current=r;var l=(0,Q.useCallback)((function(){var e=null;o.current?e=o.current:a.current?e=a.current:jt(n)&&(e=n),s.current!==e&&(c.current&&(c.current(),c.current=null),s.current=e,e&&u.current&&(c.current=u.current(e)))}),[n]),d=(0,Q.useCallback)((function(e){o.current=e,l()}),[l]);return n&&!jt(n)&&(i=n),(0,Q.useEffect)((function(){i&&(a.current=i.current),l()}),[i,null===(t=i)||void 0===t?void 0:t.current,l]),(0,Q.useEffect)((function(){return function(){var e;null==c||null===(e=c.current)||void 0===e||e.call(c)}}),[]),d}({refOrElement:n,subscriber:function(e){var t;return Ut.subscribersByElement.has(e)||(Ut.resizeObserver.observe(e),Ut.subscribersByElement.set(e,new Set)),null===(t=Ut.subscribersByElement.get(e))||void 0===t||t.add(s),function(){var t,n;null===(t=Ut.subscribersByElement.get(e))||void 0===t||t.delete(s),0===(null===(n=Ut.subscribersByElement.get(e))||void 0===n?void 0:n.size)&&(Ut.resizeObserver.unobserve(e),Ut.subscribersByElement.delete(e))}}});return c}n(81175),n(6385),n(10817),n(86293),n(55668),n(37529),n(51501);var Kt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.desiredSize,r=void 0===n?Number.MAX_SAFE_INTEGER:n,i=t.desiredHeight,a=void 0===i?r:i,o=t.desiredWidth,s=void 0===o?r:o,c=t.desiredLabel,u=void 0===c?"":c;if(e&&!(e.length<=0)){if(u){var l=e.filter((function(e){return e.label===u})),d=(0,_e.Z)(l,1),p=d[0];if(p)return p}if(1===e.length)return e[0];var f=e.map((function(e){var t=[(e.width||0)*(e.height||0),a*s];return{ratio:Math.max.apply(Math,t)/Math.min.apply(Math,t),image:e}})).sort((function(e,t){return e.ratio-t.ratio})),v=(0,_e.Z)(f,1),h=v[0];return h.image}},Yt=n(76956),Ft=n(50580),Bt=n(19616),Gt=n.n(Bt);n(28977);var Ht,Wt,qt=function(e){var t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return"".concat(t,", ").concat(n,", ").concat(r)};function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,te.Z)(e);if(t){var i=(0,te.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,ee.Z)(this,n)}}var zt={name:"1jzi3uc",styles:"&:after{opacity:1;}"},Qt={name:"k39uwt",styles:"&:before{opacity:1;}"},Jt={name:"21xn5r",styles:"transform:rotate(180deg)"},Xt=(0,Ft.Z)("div",{target:"e10w4sq01"})("width:100%;overflow:hidden;",(function(e){return(0,O.iv)("&:before,&:after{display:block;width:",8,"px;top:0;bottom:0;content:'';position:absolute;z-index:2;",e.rtl&&Jt,";}&:before{opacity:0;transition:opacity 100ms linear;background:linear-gradient(\n        90deg,\n        rgb(",qt(e.backgroundColor),"),\n        rgba(",qt(e.backgroundColor),", 0)\n      );inset-inline-start:-1px;}&:after{opacity:0;background:linear-gradient(\n        270deg,\n        rgb(",qt(e.backgroundColor),"),\n        rgba(",qt(e.backgroundColor),", 0)\n      );inset-inline-end:-1px;}","")})," ",(function(e){return e.isAnimating&&!e.animationWillSoonEnd&&Qt})," ",(function(e){return e.shouldMarquee&&zt})," ",W.width.medium,"{width:auto;left:",q,"px;bottom:",38,"px;right:",64,"px;}",W.width.small,"{display:block;bottom:",32,"px;",W.height.small,"{bottom:",q,"px;}}"),$t=(0,O.F4)(Ht||(Ht=(0,nt.Z)(["\n  0% { transform: translate3D(0, 0, 0); }\n  100% { transform: translate3D(-50%, 0, 0); }\n"]))),en=(0,O.F4)(Wt||(Wt=(0,nt.Z)(["\n  0% { transform: translate3D(0, 0, 0); }\n  100% { transform: translate3D(50%, 0, 0); }\n"]))),tn=(0,Ft.Z)("span",{target:"e10w4sq00"})("white-space:nowrap;display:inline-block;",(function(e){return e.shouldMarquee&&(0,O.iv)("will-change:transform;animation:",e.rtl?en:$t,";animation-timing-function:linear;animation-delay:",e.animationDelay,"ms;animation-duration:",e.animationTime,"s;animation-iteration-count:1;","")}),";"),nn=function(e){(0,$.Z)(n,e);var t=Vt(n);function n(e){var r;return(0,c.Z)(this,n),r=t.call(this,e),(0,l.Z)((0,Ee.Z)(r),"onAnimationStart",(function(){r.animationWillSoonEndTimeout&&clearTimeout(r.animationWillSoonEndTimeout),r.setState({isAnimating:!0,animationWillSoonEnd:!1});r.animationWillSoonEndTimeout=setTimeout((function(){r.setState({animationWillSoonEnd:!0})}),1e3*r.state.animationTime-300)})),(0,l.Z)((0,Ee.Z)(r),"onAnimationEnd",(function(){r.setState({isAnimating:!1,animationWillSoonEnd:!1})})),r.setTitleRef=function(e){e&&(r.titleRef=e,r.setShouldMarquee(),r.installAnimationHandler())},r.setTitleSpanRef=function(e){e&&(r.titleSpanRef=e,r.direction=window.getComputedStyle(e,null).direction)},r.setWrapperRef=function(e){e&&(r.wrapperRef=e,r.setShouldMarquee())},r.state={animationTime:0,shouldMarquee:!1,isAnimating:!1,animationWillSoonEnd:!1},r.setShouldMarquee=r.setShouldMarquee.bind((0,Ee.Z)(r)),r.installAnimationHandler=r.installAnimationHandler.bind((0,Ee.Z)(r)),r.removeAnimationHandler=r.removeAnimationHandler.bind((0,Ee.Z)(r)),r.handleRestartMarquee=r.handleRestartMarquee.bind((0,Ee.Z)(r)),r.restartMarquee=r.restartMarquee.bind((0,Ee.Z)(r)),r}return(0,u.Z)(n,[{key:"componentDidMount",value:function(){var e,t,n,r;e="resize",t="optimizedResize",n=window,r=!1,n.addEventListener(e,(function(){r||(r=!0,Gt()((function(){n.dispatchEvent(new CustomEvent(t)),r=!1})))})),window.addEventListener("optimizedResize",this.setShouldMarquee)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("optimizedResize",this.setShouldMarquee),this.removeAnimationHandler()}},{key:"handleRestartMarquee",value:function(){this.state.isAnimating||this.restartMarquee()}},{key:"restartMarquee",value:function(){var e=this;this.state.shouldMarquee&&(this.setState({shouldMarquee:!1,isAnimating:!1}),setTimeout((function(){e.setState({shouldMarquee:!0})}),0))}},{key:"removeAnimationHandler",value:function(){this.titleRef&&(this.titleRef.removeEventListener("animationstart",this.onAnimationStart),this.titleRef.removeEventListener("animationend",this.onAnimationEnd))}},{key:"installAnimationHandler",value:function(){this.titleRef&&(this.titleRef.addEventListener("animationstart",this.onAnimationStart),this.titleRef.addEventListener("animationend",this.onAnimationEnd))}},{key:"setShouldMarquee",value:function(){var e;if(this.titleRef&&this.wrapperRef){var t=parseInt(getComputedStyle(this.titleRef).width,10),n=null===(e=this.titleSpanRef)||void 0===e?void 0:e.getBoundingClientRect().width;if(!isNaN(t)&&n){var r=n>=parseInt(getComputedStyle(this.wrapperRef).width,10)-16,i=this.props.speed,a=t/(void 0===i?100:i);this.setState({shouldMarquee:r,animationTime:a})}}}},{key:"render",value:function(){var e=this.state,t=e.shouldMarquee,n=e.animationTime,r=this.props,i=r.animationDelay,a=void 0===i?500:i,o=r.backgroundColor,s=r.children,c="rtl"===this.direction;return(0,re.jsx)(Xt,{backgroundColor:o,ref:this.setWrapperRef,shouldMarquee:t,onMouseEnter:this.handleRestartMarquee,onTouchStart:this.handleRestartMarquee,isAnimating:this.state.isAnimating,animationWillSoonEnd:this.state.animationWillSoonEnd,rtl:c,children:(0,re.jsxs)(tn,{ref:this.setTitleRef,shouldMarquee:t,animationTime:n,animationDelay:a,rtl:c,children:[(0,re.jsx)("span",{ref:this.setTitleSpanRef,children:s}),(0,re.jsx)("span",{"aria-hidden":"true",style:{marginInline:30,visibility:this.state.isAnimating&&t?"visible":"hidden"},children:s})]})})}}]),n}(Q.Component);const rn=nn,an="kpGMQq1KFz620g_BD_dS";var on=function(e){var t=e.text,n=e.ariaLabel,r=void 0===n?t:n,i=e.title,a=void 0===i?r:i,o=e.className;return(0,re.jsx)("span",{"aria-label":r,className:de()(an,o),title:a,children:t})},sn=function(e){var t=e.className,n=e.fullText,r=void 0!==n&&n;return(0,re.jsx)(on,{ariaLabel:b.get("card.a11y.explicit"),text:r?b.get("card.a11y.explicit"):"E",className:t})};const cn="AcNBXY8a1dtuVjzohHum",un="QVzM9SU5i7YbTDNHLg7f",ln="dECpSYmWqPAhq6xqf2t3",dn="BBONEiih1fictVQD3zPv",pn="KY7dx4ugjz_hIhb52whf",fn="Vo5CZgetFW8OpvjS2Grw",vn="Jf1U8sTKuLJ9IyOJmdAu",hn="uUzgJ1pUOlLsN1WbgXbm",yn="fyPLuMXZJ56MAwKBR039",mn="qKFtNf0ePzb1WoAnMpqY",_n="CaGjpy1b7an0al8iBgwm",En="VqrXPihhlThTXPHcc3r_",bn="OhMNd1DML9A_umQBxnn0",gn="mPvhsobuETPHKqM2rQ4Y",Sn="lonOIpi_0j5oBMelMSqT",kn="EyXOlEhvTsK9D7MOyTou",Tn="MRQF4SWILdQPyP8vKNl5",An="yMiCrk8KlMfniHKUqp7Y",Rn="vc1j9CyBfsEpvjg8MDIN",wn="QBwvPgiXdCOlR8WpujsY";var On,Pn=n(10766),Nn=n(85322);!function(e){e.UNKNOWN="unknown",e.FULL="full-playback",e.PREVIEW="preview-playback"}(On||(On={}));var In="SET_PLAYBACK_MODE";function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cn={width:null,height:null},Mn=(0,Q.createContext)(Cn),xn=function(e){var t=e.children,n=(0,Q.useState)(null),r=(0,_e.Z)(n,2),i=r[0],a=r[1],o=(0,Q.useState)({width:null,height:null}),s=(0,_e.Z)(o,2),c=s[0],u=s[1];return(0,Q.useEffect)((function(){a(document.body)}),[]),Zt({onResize:function(){u({width:window.innerWidth,height:window.innerHeight})},refOrElement:i}),(0,re.jsx)(Mn.Provider,{value:Ln({},c),children:t})},jn="LOG_INTERACTION";function Un(e){return{type:jn,interactionData:e}}const Zn="Je7ETKQYQwGAi6otT7_A",Kn="Zdq9pfa5UxsOdP7pkE6O",Yn="vmc52IakYNzoZi8ZtZyM",Fn="MF3azbeGWCJJNYSGhLo1";var Bn=n(73540),Gn=n(94179),Hn=n(8955),Wn=function(e){var t=e.url,n=e.newWindow,r=void 0===n||n;window.open(t,r?"_blank":"_top")},qn=function(){var e=(0,R.v9)((function(e){return{podcastURI:e.data.entity.relatedEntityUri,initialPodcastState:e.data.saved,isMobile:e.settings.isMobile,shouldUseDeeplink:e.settings.session.isAnonymous}})),t=e.podcastURI,n=e.initialPodcastState,r=e.isMobile,i=e.shouldUseDeeplink,a=(0,R.I0)(),o=pt("embed_player_p"),s=Lt(t,n),c=(0,_e.Z)(s,2),u=c[0],d=c[1],p=(0,Q.useContext)(pe),f=u?p.get("following"):p.get("follow");return(0,re.jsx)("button",{className:de()(Kn,(0,l.Z)({},Yn,u)),onClick:function(){i?(a(Un({action_type:"click",action_intent:"deeplink",action_item_id:"follow-button"})),Wn({url:o.compositeEntity,newWindow:!r})):(a(Un({action_type:"click",action_intent:u?"unfollow":"follow"})),d(!u))},tabIndex:0,"aria-label":f,children:f})},Vn=function(){var e=(0,R.v9)((function(e){return{uri:e.data.entity.uri,initialState:e.data.saved,isMobile:e.settings.isMobile,shouldUseDeeplink:e.settings.session.isAnonymous}})),t=e.uri,n=e.initialState,r=e.isMobile,i=e.shouldUseDeeplink,a=(0,R.I0)(),o=pt("embed_player_p"),s=Lt(t,n),c=(0,_e.Z)(s,2),u=c[0],l=c[1],d=(0,Q.useContext)(pe),p=u?d.get("embed_remove_track"):d.get("embed_save_track");return(0,re.jsx)(Bn.o,{condensedAll:!0,title:p,"aria-label":p,className:Fn,iconOnly:u?Gn.a:Hn.A,onClick:function(){i?(a(Un({action_type:"click",action_intent:"deeplink",action_item_id:"heart-button"})),Wn({url:o.embeddedEntity,newWindow:!r})):(a(Un({action_type:"click",action_intent:u?"remove-from-library":"add-to-library"})),l(!u))},semanticColor:"textBase"})},zn=function(){var e=(0,R.v9)((function(e){return{entityContext:e.settings.entityContext}})),t=e.entityContext,n="show"===t||"episode"===t;return(0,re.jsx)("div",{className:Zn,children:n?(0,re.jsx)(qn,{}):(0,re.jsx)(Vn,{})})},Qn=function(e){var t=e.data.entity;return(null==t?void 0:t.type)===it.JM.EPISODE},Jn=function(e){var t;return null===(t=(0,it.EC)(e.data.embeded_entity_uri))||void 0===t?void 0:t.toURL()},Xn=["imageSrc","scaleDown","showBelowUpsell"];function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var er=function(e){var t,n=e.imageSrc,r=e.scaleDown,i=e.showBelowUpsell,a=(0,Yt.Z)(e,Xn);return(0,re.jsx)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"aria-hidden":!0,className:de()(ln,(t={},(0,l.Z)(t,pn,r),(0,l.Z)(t,dn,i),t)),style:{"--image-src":"url('".concat(n,"')")}},a))},tr=function(e){var t=e.className,n=(0,Q.useContext)(pe);return(0,re.jsx)(on,{className:t,text:n.get("embed_preview")})},nr=function(e){var t=e.className,n=e.isPreview,r=e.isExplicit,i=e.show,a=void 0===i||i,o=e.i18n;return(0,re.jsxs)(Pn.a,{className:de()(bn,t,(0,l.Z)({},gn,!a)),"aria-label":o.get("spe.tags"),children:[(0,re.jsx)(tr,{className:de()(Sn,(0,l.Z)({},gn,!n))}),(0,re.jsx)(sn,{className:de()(Sn,(0,l.Z)({},gn,!r))})]})},rr=function(e){var t=e.uri,n=e.name,r=e.isMobile,i=e.onClick,a=(0,Q.useMemo)((function(){var e;return ct(null!==(e=(0,it.EC)(t))&&void 0!==e?e:void 0,!1).toString()}),[t]);return(0,re.jsx)(Nn.h,{standalone:!0,semanticColor:"textBase",onClick:i,href:a,target:r?"_top":"_blank",children:n})},ir=function(e,t){return e?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b;return(new Date).getUTCFullYear()===e.getUTCFullYear()?t.formatDate(e,{month:"short",day:"numeric",timeZone:"UTC"}):t.formatDate(e,{month:"short",year:"numeric",timeZone:"UTC"})}(new Date(e),t):""},ar=function(e){var t,n,r,i=e.onLogInteraction,a=e.playback,o=e.isMobile,s=e.explicit,c=e.releaseDate,u=e.title,d=e.subtitle,p=e.artists,f=e.backgroundColor,v=e.imageSrc,h=e.playbackMode,y=e.showUpsell,m=e.hasTracklist,_=(0,Q.useState)(!1),E=(0,_e.Z)(_,2),b=E[0],g=E[1],S=(0,Q.useRef)(null),k=pt("embed_player_p"),T=(0,R.I0)(),A=(0,Q.useContext)(pe),w=h===On.PREVIEW,O="true"===s,P=null===(t=null==a?void 0:a.isPaused)||void 0===t||t,N=(0,Q.useContext)(Mn),I=N.width,D=N.height;(0,Q.useEffect)((function(){return I&&D&&I>=H&&D>=B&&!w&&!P?S.current=setTimeout((function(){return g(!0)}),200):g(!1),function(){S.current&&clearTimeout(S.current)}}),[w,P,S,I,D]);var L=(0,R.v9)(Qn),C=function(e){return function(){"title"===e&&L&&T(Xe()),i({action_type:"click",action_intent:"deeplink",action_item_id:e})}};return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("div",{className:de()(cn,(0,l.Z)({},un,w)),children:[(0,re.jsx)(er,{scaleDown:b,imageSrc:v,showBelowUpsell:y,onClick:function(){C("cover-art")(),window.open(k.compositeEntity,"_blank")}}),(0,re.jsx)("div",{className:de()(fn,(n={},(0,l.Z)(n,vn,y),(0,l.Z)(n,un,w),n)),children:(0,re.jsxs)("div",{className:hn,children:[(0,re.jsx)("h1",{className:_n,dir:"auto",children:(0,re.jsx)(rn,{backgroundColor:f,animationDelay:2e3,children:(0,re.jsx)(Nn.h,{standalone:!0,semanticColor:"textBase",onClick:C("title"),href:k.selectedEntity,target:o?"_top":"_blank",children:u})})}),(0,re.jsxs)("span",{className:de()(En,(r={},(0,l.Z)(r,un,w),(0,l.Z)(r,vn,y),r)),children:[(0,re.jsx)(nr,{i18n:A,isPreview:w,isExplicit:O,show:!y,className:de()(kn,(0,l.Z)({},un,w))}),(0,re.jsx)("h2",{className:Rn,dir:"auto",children:(0,re.jsx)(rn,{backgroundColor:f,animationDelay:2e3,children:(0,re.jsxs)("span",{children:[L&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("span",{children:ir(c,A)}),(0,re.jsx)("span",{className:wn,children:"·"})]}),d&&(0,re.jsx)(Nn.h,{standalone:!0,semanticColor:"textBase",dir:"auto",onClick:C("subtitle"),href:k.compositeEntity,target:o?"_top":"_blank",children:d}),(null==p?void 0:p.length)&&p.map((function(e,t){return[t>0&&A.getSeparator(),(0,re.jsx)(rr,{uri:e.uri,name:e.name,isMobile:o,onClick:C("artist")},e.uri)]}))]})})})]}),!m&&!y&&(0,re.jsx)(zn,{})]})})]}),(0,re.jsxs)("div",{className:yn,dir:"auto",children:[(0,re.jsx)(nr,{i18n:A,isPreview:w,isExplicit:O,show:!w,className:Tn}),(0,re.jsx)("h1",{className:_n,dir:"auto",children:(0,re.jsx)(rn,{backgroundColor:f,children:(0,re.jsxs)("span",{className:mn,children:[(0,re.jsx)("span",{children:u}),L&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("span",{className:wn,children:"·"}),(0,re.jsx)("span",{children:ir(c,A)})]}),(0,re.jsx)("span",{className:wn,children:"·"}),d&&(0,re.jsx)("span",{children:d}),(null==p?void 0:p.length)&&(0,re.jsx)("span",{children:p.map((function(e,t){return[t>0&&A.getSeparator(),e.name]}))})]})})})]}),(0,re.jsx)(nr,{i18n:A,isPreview:w,isExplicit:O,show:w&&!y,className:An})]})};var or=function(e){var t,n,r;if(!e)throw new Error("Error: Entity Unavailable");var i,a,o,s=e.uri,c={};(c.title=e.title,c.subtitle=e.subtitle,c.duration=null===(t=null!==(n=e.duration)&&void 0!==n?n:0)||void 0===t?void 0:t.toString(),c.audioPreviewUrl=null===(r=e.audioPreview)||void 0===r?void 0:r.url,c.explicit=e.isExplicit?"true":"false",function(e){return!("relatedEntityUri"in e)}(e))?c.uid=e.uid:c.releaseDate=null!==(i=null===(a=e.releaseDate)||void 0===a||null===(o=a.isoString)||void 0===o?void 0:o.replace(/T.*/,""))&&void 0!==i?i:"";return{uri:s,metadata:c}};function sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ur=function(e){var t=e.showUpsell,n=(0,R.v9)((function(e){var t,n,r,i,a=or(e.data.entity).metadata,o=null===(t=Kt(rt(null!==(n=null===(r=e.data.entity)||void 0===r?void 0:r.coverArt)&&void 0!==n?n:null),{desiredSize:V.large}))||void 0===t?void 0:t.url;return{title:(null==a?void 0:a.title)||"",subtitle:(null==a?void 0:a.subtitle)||"",artists:e.data.entity.artists,imageSrc:o||"",backgroundColor:e.data.backgroundColor,playback:e.playback,explicit:(null==a?void 0:a.explicit)||"false",releaseDate:(null==a?void 0:a.releaseDate)||"",isMobile:e.settings.isMobile,playbackMode:e.machineState.playbackMode,hasTracklist:!(null===(i=e.data.entity)||void 0===i||!i.trackList)}})),r=(0,R.I0)();return(0,re.jsx)(ar,cr(cr({},n),{},{showUpsell:!!t,onLogInteraction:function(e){return r(Un(e))}}))};n(68832);var lr=n(7891);const dr=function(e){var t=e.className,n=e.ariaLabel,r=e.onClick,i=e.link,a=e.isMobile,o=e.iconSize;return(0,re.jsx)("a",{className:t,onClick:r,title:"logo",href:i,target:a?"_top":"_blank",role:"button","aria-label":n,children:(0,re.jsx)(lr.V,{iconSize:o})})},pr="CSvhaUqpjr9_ZyxY3M6j",fr="s179MbTVBFFNq3hEX0ui",vr="R1HCdpPdk5kZpey6s_Mk",hr="Q16DnmpEm_uI6JNhgUQQ",yr="NkqqbROrIT21u_aI9lgA",mr="IW3VCewLS9ZA_o_pcw1c",_r="R559n2dQlZ6OrwUcotVZ",Er="Nih5lfOITTlin_K7gT97",br="TTIFNnvMP1LvxvS96bPY",gr="un3eslFXmkXOm2GRD26s",Sr="zGZJzSccpYSamgLw0kqB",kr="hHMRk2Cerel6am6k_mwB",Tr="OV20fFMwXOnexvMHSYGV",Ar="LG2ZgBpBac8ZkhPBr16p",Rr="Yi8UsVrqnuprGsAitjH6",wr="lv_ogp1Ay2mbSLDeYjDn";var Or=n(76197),Pr=n.n(Or);function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ir=function(e){return(0,re.jsx)(Pr(),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},Dr=n(17932),Lr=n(14748),Cr=n(756),Mr="CLOSE_OVERFLOW_MENU",xr="SHOW_OVERFLOW_MENU";var jr={onPlayOnSpotify:function(){return{type:"PLAY_ON_SPOTIFY_CLICK",productName:"embed_player_p"}},onFollowOnSpotify:function(){return{type:"FOLLOW_ON_SPOTIFY_CLICK",productName:"embed_player_p"}},onLogInteraction:function(e){return Un(e)}};const Ur=(0,R.$j)((function(e){return{entityUrl:Jn(e),initialized:e.machineState.initialized,backgroundColor:e.data.backgroundColor,rtl:e.settings.rtl,isMobile:e.settings.isMobile}}),jr)((function(e){var t=e.visible,n=e.onClose,r=e.onLogInteraction,i=e.entityUrl,a=e.isMobile,o=e.backgroundColor,s=pt("embed_player_v"),c=(0,Q.useContext)(pe),u=(0,Q.useState)(!1),d=(0,_e.Z)(u,2),p=d[0],f=d[1],v=(0,R.v9)(Qn),h=(0,Q.useRef)(null),y=(0,R.I0)(),m=function(){n(),r({action_type:"click",action_intent:"close-context-menu"})},_=function(){var e=(0,k.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:if(!i){e.next=8;break}return e.next=5,St(i,h.current);case 5:r({action_type:"click",action_intent:"clipboard-copy"}),f(!0),setTimeout((function(){return f(!1)}),2e3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,re.jsx)(Ir,{active:t,focusTrapOptions:{onDeactivate:function(){m()}},children:(0,re.jsxs)("div",{ref:h,className:de()(pr,(0,l.Z)({},fr,t)),style:{backgroundColor:o},children:[(0,re.jsxs)("div",{className:de()(hr,(0,l.Z)({},fr,t)),children:[(0,re.jsxs)("ul",{className:de()(vr,(0,l.Z)({},fr,t)),children:[(0,re.jsx)("li",{className:_r,children:(0,re.jsx)("a",{className:Er,tabIndex:-1,href:s.embeddedEntity,target:a?"_top":"_blank",children:(0,re.jsxs)("button",{className:Er,onClick:function(){v&&y(Xe()),r({action_type:"click",action_intent:"deeplink",action_item_id:"play-on-spotify"})},children:[(0,re.jsx)(lr.V,{className:mr,"aria-hidden":"true"}),(0,re.jsx)("div",{className:Rr,children:c.get("play_on_spotify")})]})})}),(0,re.jsx)("li",{className:_r,children:(0,re.jsx)("a",{className:Er,tabIndex:-1,href:s.compositeEntity,target:a?"_top":"_blank",children:(0,re.jsxs)("button",{className:Er,onClick:function(){return r({action_type:"click",action_intent:"deeplink",action_item_id:"follow-on-spotify"})},children:[(0,re.jsx)(Dr.V,{className:mr,"aria-hidden":"true"}),(0,re.jsx)("div",{className:Rr,children:c.get("follow_on_spotify")})]})})}),(0,re.jsx)("li",{className:_r,children:(0,re.jsxs)("button",{disabled:!i,className:Er,onClick:_,children:[(0,re.jsx)(Lr.o,{className:mr,"aria-hidden":"true"}),(0,re.jsxs)("div",{className:br,children:[(0,re.jsx)("span",{className:de()(gr,(0,l.Z)({},Sr,p)),children:(0,re.jsx)("div",{className:Rr,children:c.get("spe.copy_link")})}),(0,re.jsx)("span",{className:de()(kr,(0,l.Z)({},Sr,p)),children:(0,re.jsx)("div",{className:Rr,children:c.get("embed_success_share_link")})})]})]})})]}),(0,re.jsxs)("div",{className:Tr,children:[(0,re.jsx)("a",{className:Ar,href:"https://www.spotify.com/legal/privacy-policy/",target:a?"_top":"_blank",onClick:function(){r({action_type:"click",action_intent:"privacypolicy-show"})},children:c.get("spe.privacy_policy")}),(0,re.jsx)("span",{className:wr,children:"·"}),(0,re.jsx)("a",{className:Ar,href:"https://www.spotify.com/legal",target:a?"_top":"_blank",onClick:function(){r({action_type:"click",action_intent:"termsandconditions-show"})},children:c.get("spe.terms_and_conditions")})]})]}),(0,re.jsx)("button",{title:c.get("close_button_action"),className:yr,onClick:m,children:(0,re.jsx)(Cr.k,{})})]})})}));var Zr="INITIALIZE",Kr="MOUNTED";var Yr=n(28929),Fr=n(11677),Br=n(42387),Gr=n(90955),Hr=n(91603),Wr=n(27002);const qr="T9O9imAX0Krdj_UpOPdX",Vr="OChCoGSRDryrKuiboYYR",zr="HdjmlZ43ZJiyRyQSzoT3",Qr="qggWUYwLKItGcy_yWVVw",Jr="vJYZrTdJY0FWxLWkYPp8",Xr="t8PTV__f_iZbtQy8OlHS",$r="VZCeeoA2j8bEQP549DpG",ei="A1g5vjsJDEZc7u9ZQb3C",ti="Ew089ALA6VYi6M4rqvFa",ni="U6UYTAjBSixqajAn6395",ri="dKuCgmg__ziHEf6P93rj",ii="EatefwiBJGwNYDsJ2oFj",ai="SBFsLJ_GrElxXMfLVAWm",oi="Y7w0Te9C9Ji8vPAjbi5B",si="nqQfepR5i3SGHxEVvM9X",ci="hlkjJv66EOvqb0PbtvMr",ui="LUyZOsxslHEu00RPSXTN",li="lyGagdcFPMNe4DEgBOxA",di="ZYcyHh5KIkHywjZus0XE",pi="ClIUwn01ULpLvFHMPdxw",fi="Sei05kU68oKkey0j9yYk",vi="tzgPAI45WVjR3zR6e_Tw",hi="m7a2Ab6BWH3KAQErp4dZ";var yi,mi=n(31625);function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.INITIAL=0]="INITIAL",e[e.BEGIN_NEXT_TICK=1]="BEGIN_NEXT_TICK",e[e.ANIMATE=2]="ANIMATE"}(yi||(yi={}));var bi=function(e){var t=e.onClick,n=(0,Q.useState)({left:0,right:0,animationState:yi.INITIAL}),r=(0,_e.Z)(n,2),i=r[0],a=r[1],o=(0,Q.useState)(!0),s=(0,_e.Z)(o,2),c=s[0],u=s[1],l=(0,Q.useContext)(pe),d=(0,R.v9)((function(e){var t,n,r,i;return{backgroundColor:e.data.backgroundColor,duration:null===(t=e.playback)||void 0===t?void 0:t.duration,playPosition:null===(n=e.playback)||void 0===n?void 0:n.positionAsOfTimestamp,isPaused:!(null!==(r=e.playback)&&void 0!==r&&r.hasContext)||(null===(i=e.playback)||void 0===i?void 0:i.isPaused)}})),p=d.backgroundColor,f=d.duration,v=d.playPosition,h=d.isPaused,y=(0,Q.useRef)(!0);y.current=i.right<180;var m=Q.useContext(Mn).height;(0,Q.useEffect)((function(){m&&u(m>=B)}),[m]),(0,Q.useEffect)((function(){if(0===v)return y.current=!0,void a((function(e){return Ei(Ei({},e),{},{left:0,right:0,animationState:yi.ANIMATE})}));if(f&&v&&v>0){var e=360*v/f,t=e>180?180:e,n=e>180?e-180:0,r=y.current;a((function(e){return Ei(Ei({},e),{},{left:180===t&&r&&e.animationState===yi.ANIMATE?0:n,right:t,animationState:e.animationState===yi.INITIAL?yi.BEGIN_NEXT_TICK:e.animationState})}))}}),[f,v]),(0,Q.useEffect)((function(){i.animationState===yi.BEGIN_NEXT_TICK&&a((function(e){return Ei(Ei({},e),{},{animationState:yi.ANIMATE})}))}),[i.animationState]);var _={zIndex:1,transform:"rotate(".concat(i.right,"deg)"),transition:0===i.right||i.animationState!==yi.ANIMATE?"none":"transform 1s ease-in-out"},E={zIndex:2,transform:"rotate(".concat(i.left,"deg)"),transition:0===i.left||i.animationState!==yi.ANIMATE?"none":"transform 1s ease-in-out"};return(0,re.jsx)("div",{className:li,"data-testid":"preview-play-pause",children:h?(0,re.jsx)("button",{className:hi,"aria-label":l.get("embed_play"),"data-testid":"play-pause-button",onClick:t,children:(0,re.jsx)(ae.z,{iconSize:c?48:32})}):(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("div",{className:pi,children:(0,re.jsx)("div",{className:vi,style:_,"data-testid":"progress-right"})}),(0,re.jsx)("div",{className:fi,children:(0,re.jsx)("div",{className:vi,style:E,"data-testid":"progress-left"})}),(0,re.jsx)("div",{className:di,style:{backgroundColor:p},children:(0,re.jsx)("button",{className:hi,"aria-label":l.get("embed_pause"),"data-testid":"play-pause-button",onClick:t,children:(0,re.jsx)(mi.k,{iconSize:c?32:24})})})]})})};function gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ki=function(e){var t=e.style,n=e.children;return(0,re.jsx)("div",{style:t,className:ii,children:n})};const Ti=function(e){var t,n,r,i,a,o,s,c=e.showUpsell,u=(0,R.v9)((function(e){var t,n,r,i=or(e.data.entity).metadata;return{isPlayable:!(null===(t=e.data.entity)||void 0===t||!t.isPlayable),playback:e.playback,duration:(null===(n=e.playback)||void 0===n?void 0:n.duration)||Number(null==i?void 0:i.duration),playbackMode:e.machineState.playbackMode,isPodcast:Qn(e),hasTracklist:!(null===(r=e.data.entity)||void 0===r||!r.trackList)}})),d=u.isPlayable,p=u.playback,f=u.duration,v=u.playbackMode,h=u.isPodcast,y=u.hasTracklist,m=(0,Q.useContext)(pe),_=(0,Q.useState)({isDragging:!1,fakePosition:null,showRemainingTime:!0,currentTrackURI:null}),E=(0,_e.Z)(_,2),b=E[0],g=E[1],S=(0,Q.useState)(),T=(0,_e.Z)(S,2),w=T[0],O=T[1],P=(0,R.I0)(),N=function(e){P(Un(e))},I=v===On.PREVIEW,D=function(){null!=p&&p.isDisabled||(P(Qe()),N({action_type:"click",action_intent:!1===(null==p?void 0:p.isPaused)?"pause":"play",action_item_id:"now-playing-bar"}))},L=(0,Wr.y1)((function(){g(Si(Si({},b),{},{fakePosition:null}))}),1e3),C=function(){var e=(0,k.Z)(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.percentage,r=t.ended,i=t.id,g(Si(Si({},b),{},{isDragging:!0,fakePosition:n})),r&&(P(et(n||0)),g(Si(Si({},b),{},{isDragging:!1,fakePosition:n})),N({action_type:"click",action_intent:"seek-click"}),L()),r||w===i||(O(i),N({action_type:"click",action_intent:"seek-drag"}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=b.showRemainingTime,x=b.isDragging,j=b.fakePosition;Number.isFinite(j)?o=j*f:null!=p&&p.positionAsOfTimestamp&&(o=null==p?void 0:p.positionAsOfTimestamp);var U=(s=null!=p&&p.hasContext||void 0!==(null==p?void 0:p.isPaused)?ke(M?(o||0)-f:o):ke(f)).replace(/\d/g,"0").replace(/^\d/,"-0"),Z=!(null!=p&&p.hasContext)||null===(t=null==p?void 0:p.isPaused)||void 0===t||t,K=y&&!c||h&&!I;return(0,re.jsxs)("div",{className:de()(Xr,(0,l.Z)({},qr,v===On.PREVIEW)),children:[(0,re.jsxs)("div",{className:de()(ai,(0,l.Z)({},qr,I)),children:[(0,re.jsxs)("div",{className:de()(oi,(0,l.Z)({},qr,I)),dir:"ltr",children:[(0,re.jsx)(Bn.o,{buttonSize:"sm",className:de()(zr,ni,(n={},(0,l.Z)(n,ti,!K),(0,l.Z)(n,ei,!Z),n)),semanticColor:"textBase",disabled:!(null!=p&&null!==(r=p.restrictions)&&void 0!==r&&r.canSeek),onClick:function(){var e;null!=p&&null!==(e=p.restrictions)&&void 0!==e&&e.canSeek&&(y?(P({type:Ge}),N({action_type:"click",action_intent:"previous"})):(P({type:Ye}),N({action_type:"click",action_intent:"skip-back-15"})))},iconOnly:y?Yr.y:Fr.v,"aria-label":y?m.get("spe.playback-control.skip-back"):m.get("spe.playback-control.skip-backward-15")}),(0,re.jsx)("div",{className:de()(Vr,(0,l.Z)({},ei,!Z)),children:(0,re.jsx)(Le,{tooltip:ki,max:f,current:o,onDragging:C,isDragging:x,enabled:d})}),(0,re.jsx)(Bn.o,{buttonSize:"sm",className:de()(zr,ri,(i={},(0,l.Z)(i,ti,!K),(0,l.Z)(i,ei,!Z),i)),semanticColor:"textBase",disabled:!(null!=p&&null!==(a=p.restrictions)&&void 0!==a&&a.canSeek),onClick:function(){var e;null!=p&&null!==(e=p.restrictions)&&void 0!==e&&e.canSeek&&(y?(P({type:Be}),N({action_type:"click",action_intent:"next"})):(P({type:Fe}),N({action_type:"click",action_intent:"skip-forward-15"})))},iconOnly:y?Br.W:Gr.v,"data-testid":"skip-forward","aria-label":y?m.get("spe.playback-control.skip-forward"):m.get("spe.playback-control.skip-forward-15")})]}),(0,re.jsxs)("button",{type:"button",className:de()(ui,(0,l.Z)({},qr,I)),onClick:function(){g(Si(Si({},b),{},{showRemainingTime:!b.showRemainingTime})),N({action_type:"click",action_intent:"change-time-format"})},"aria-label":m.get("spe.playback-control.progress-timestamp"),children:[(0,re.jsx)("span",{className:si,"aria-hidden":!0,children:U}),(0,re.jsx)("span",{role:"timer",className:ci,"data-testid":"progress-timestamp",children:s})]}),(0,re.jsx)(Bn.o,{buttonSize:"sm",className:$r,semanticColor:"textBase",title:m.get("embed_more"),"aria-label":m.get("embed_more"),onClick:function(){P({type:xr}),N({action_type:"click",action_intent:"open-context-menu"})},iconOnly:Hr.N})]}),(0,re.jsx)("div",{className:de()(Qr,(0,l.Z)({},Jr,c)),children:I?(0,re.jsx)(bi,{onClick:D}):(0,re.jsx)(ye,{onClick:D,isPaused:Z,isLoading:(null==p?void 0:p.isBuffering)||!1,isDisabled:(null==p?void 0:p.isDisabled)||!1})})]})},Ai="LKKneJCVRLbYQrEtNZ8g",Ri="HLXe2lxjDkJqhQi2vrEf",wi="gMx7ZQAGhBSydDebRjyI",Oi="bWPuLsLUqOYMxTBZORnv",Pi="cPwAFoCXW_Kf92Eu7Vv3",Ni="ZblRSxh8IUxjcEApoZVg";var Ii=n(66638);const Di="pILb1Mxt1ADw55uBp9MT",Li="QlWh1Otkxhp4Iw2jGsfF",Ci="lOFHWzJBxQm_u_tkNlJj",Mi="hGyNbNaSvy84Q6lRAj6h",xi="rPxBGW7bLy0VXyf3TyI2",ji="iQ3KW05kZN2fUOq1sSeJ",Ui="FQaGyQcseqG_iivuXtSE",Zi="PLZ4MPWFl9cppEN8JeZu",Ki="hB___2U5RaXLm0_PlkEA",Yi="zrwLgiQqEhpxAwKEw_BP",Fi="sLbSQiSHpLyZ41n0hvXR",Bi="anKRvW_yEHQYX5HsKesx",Gi="n2LEA6e8CnJ8B3sw0mws",Hi="cVbX0iM9ETMEJp00CkxN",Wi="qqcfEVy0yvlUGcyQTWrO",qi="PqgHoWvyDQrOFeTATlew";var Vi=n(4285),zi=function(e){var t=e.className,n=(0,Q.useContext)(pe);return(0,re.jsx)(on,{className:t,text:n.get("embed_preview")})},Qi=function(e){var t=e.className,n=e.isPreview,r=e.isExplicit,i=e.show,a=void 0===i||i,o=e.i18n;return(0,re.jsxs)(Pn.a,{className:de()(bn,t,(0,l.Z)({},gn,!a)),"aria-label":o.get("spe.tags"),children:[(0,re.jsx)(zi,{className:de()(Sn,(0,l.Z)({},gn,!n))}),(0,re.jsx)(sn,{className:de()(Sn,(0,l.Z)({},gn,!r))})]})},Ji=function(){var e=(0,Q.useContext)(pe),t=(0,R.v9)((function(e){var t,n;return{isExplicit:null!==(t=null===(n=e.data.entity)||void 0===n?void 0:n.isExplicit)&&void 0!==t&&t,playbackMode:e.machineState.playbackMode}})),n=t.isExplicit,r=t.playbackMode===On.PREVIEW;return(0,re.jsx)(Qi,{i18n:e,isPreview:r,isExplicit:n,className:Tn})},Xi=function(e,t){switch(e){case it.JM.EPISODE:case it.JM.SHOW:return t.get("spe.upsell_cta");case it.JM.TRACK:return t.get("spe.track_upsell_cta");case it.JM.PLAYLIST:default:return t.get("spe.track_list_upsell")}},$i=function(){var e=(0,R.v9)((function(e){return e.data.entity.type})),t=(0,Q.useContext)(pe);return(0,re.jsx)(bt.D,{as:"h1",variant:"canon",className:Bi,children:Xi(e,t)})},ea=Q.forwardRef((function(e,t){var n=e.onClose,r=pt("embed_player_v"),i=(0,Q.useState)("md"),a=(0,_e.Z)(i,2),o=a[0],s=a[1],c=Q.useContext(Mn),u=c.width,l=c.height,d=(0,Q.useContext)(pe),p=(0,R.I0)(),f=(0,R.v9)((function(e){var t,n,r;return{backgroundColor:e.data.backgroundColor,isMobile:e.settings.isMobile,imageSrc:null===(t=Kt(rt(null!==(n=null===(r=e.data.entity)||void 0===r?void 0:r.coverArt)&&void 0!==n?n:null),{desiredSize:V.large}))||void 0===t?void 0:t.url}})),v=f.backgroundColor,h=f.isMobile,y=f.imageSrc;return(0,Q.useEffect)((function(){var e;l&&u&&s((e=u,l<F&&e<G?"sm":"md"))}),[l,u]),(0,re.jsxs)("div",{ref:t,className:Di,style:{"--background-color":"".concat(qt(v))},children:[(0,re.jsxs)("div",{className:ji,children:[(0,re.jsx)("div",{className:Ui,style:{"--image-src":"url('".concat(y,"')")}}),(0,re.jsxs)("div",{className:Fi,children:[(0,re.jsx)($i,{}),(0,re.jsx)("div",{className:Zi,children:(0,re.jsx)(Vi.D,{as:"a",buttonSize:o,colorSet:"invertedLight",href:r.cta,target:h?"_top":"_blank",onClick:function(){p(Un({action_type:"click",action_intent:"deeplink",action_item_id:"get-spotify"}))},tabIndex:0,children:(0,re.jsx)(bt.D,{className:Ki,variant:"canon",children:d.get("get_spotify")})})}),(0,re.jsx)(Bn.o,{semanticColor:"textBase",iconOnly:Cr.k,title:d.get("close_button_action"),className:Yi,onClick:function(){n(),p(Un({action_type:"click",action_intent:"close-upsell"}))},"aria-label":d.get("close_button_action")})]})]}),(0,re.jsxs)("div",{className:Gi,children:[(0,re.jsx)(ur,{showUpsell:!0}),(0,re.jsx)("div",{className:qi,children:(0,re.jsx)(Ji,{})})]}),(0,re.jsxs)("div",{className:Hi,children:[(0,re.jsx)("div",{className:Wi,children:(0,re.jsx)(Ji,{})}),(0,re.jsx)(Ti,{showUpsell:!0})]})]})})),ta=function(){var e=(0,R.v9)((function(e){var t,n,r,i,a;return{position:lt(e.playback),duration:null===(t=e.playback)||void 0===t?void 0:t.duration,isPreview:e.machineState.playbackMode===On.PREVIEW,isPaused:null===(n=e.playback)||void 0===n?void 0:n.isPaused,playingEntityUri:null===(r=e.playback)||void 0===r||null===(i=r.context)||void 0===i?void 0:i.uri,hasContext:null===(a=e.playback)||void 0===a?void 0:a.hasContext}})),t=e.position,n=e.duration,r=e.isPreview,i=e.isPaused,a=e.playingEntityUri,o=e.hasContext,s=(0,Q.useState)(!1),c=(0,_e.Z)(s,2),u=c[0],l=c[1],d=(0,Q.useState)(void 0),p=(0,_e.Z)(d,2),f=p[0],v=p[1];(0,Q.useEffect)((function(){o&&r&&null!==t&&n&&((t>2*n/3||t>0&&i)&&f!==a&&(v(a),l(!0)))}),[t,n,r,i,a,f,o]);var h=(0,Q.useRef)(null);return(0,re.jsx)(Ii.Z,{nodeRef:h,in:u,mountOnEnter:!0,unmountOnExit:!0,timeout:200,classNames:{enter:Li,enterActive:Ci,exit:Mi,exitActive:xi},children:(0,re.jsx)(ea,{ref:h,onClose:function(){l(!1)}})})};n(65387),n(62037),n(87134);var na=function(e){if(-1===e||Number.isNaN(e))return"";var t=function(e){var t=Math.floor(e/1e3),n=Math.floor(t/60),r=Math.floor(n/60),i=60*r,a=n-i;return{hours:r,minutes:a,seconds:t-60*i-60*a}}(e),n=t.hours,r=t.minutes,i=t.seconds,a=n>0?"".concat(n,":"):"",o=n>0&&r<10?"0".concat(r):r,s=i<10?"0".concat(i):i;return"".concat(a).concat(o,":").concat(s)};const ra="ILBWJ5qBTswUE70J7XJx",ia="MbhoCu6jsrpkUnBU8BzH",aa="ix5xEi3XvF_PAmUuh7sw",oa="PjteHbWzSyuQ9cArme_r",sa="nnyIEaOSPY8Riey2Bmbw",ca="YHmQmICc0o6p9TRg7ufJ",ua="qfrBwWajQbtZb6_kRJzw",la="n9j4yH8fTb18m0l2QCJb",da="QZ8JzsYF4qfkAAbajDIU",pa="DH4fFTT3gKcARjXVkTJF",fa="KePuWa2He3vCV0GH19rI",va="qokoRz32JIxABTWdTy41";var ha=n(73739),ya=function(e){var t,n,r,i,a,o=e.playback,s=e.machineState.playbackMode;if("artist"===(null===(t=e.data.entity)||void 0===t?void 0:t.type)&&s===On.FULL){var c,u,l=null===(c=e.data.entity)||void 0===c?void 0:c.trackList;return null==l||null===(u=l.find((function(e){var t;return e.uri===(null==o||null===(t=o.item)||void 0===t?void 0:t.uri)})))||void 0===u?void 0:u.uid}return null!==(n=s===On.FULL?null==o||null===(r=o.item)||void 0===r?void 0:r.uid:null==o||null===(i=o.context)||void 0===i||null===(a=i.metadata)||void 0===a?void 0:a.uid)&&void 0!==n?n:void 0},ma=function(e){var t,n=e.hoverOnTrack,r=e.isCurrentTrack,i=e.isPaused,a=e.isPlayable,o=e.trackNumber,s=e.hasPlaybackContext,c=(0,Q.useContext)(pe);t=a?r&&!i&&s?(0,re.jsx)(mi.k,{"data-testid":"pause-icon",iconSize:16}):n||r&&i&&s?(0,re.jsx)(ha.J,{"data-testid":"play-icon",iconSize:16}):o:o;var u=s&&r&&!i;return(0,re.jsx)("button",{"data-testid":"playback-indicator",className:fa,"aria-label":u?c.get("spe.playback-control.pause-track"):c.get("spe.playback-control.play-track"),disabled:!a,children:t})},_a=Q.forwardRef((function(e,t){var n,r=e.index,i=e.trackNumber,a=e.title,o=e.subtitle,s=e.duration,c=e.isCurrentTrack,u=void 0!==c&&c,d=e.isPlayable,p=e.isExplicit,f=e.uid,v=(0,Q.useState)(!1),h=(0,_e.Z)(v,2),y=h[0],m=h[1],_=(0,R.v9)((function(e){var t,n;return null!==(t=null===(n=e.playback)||void 0===n?void 0:n.hasContext)&&void 0!==t&&t})),E=(0,R.v9)((function(e){var t;return null===(t=e.playback)||void 0===t?void 0:t.isPaused})),b=(0,R.v9)((function(e){var t;return null===(t=e.playback)||void 0===t?void 0:t.isDisabled})),g=(0,R.v9)((function(e){var t,n;return(null===(t=e.data.entity)||void 0===t?void 0:t.trackList)&&(null===(n=e.data.entity)||void 0===n?void 0:n.trackList[r].uri)})),S=(0,R.v9)(ya),k=(0,R.I0)(),T=Q.useContext(Mn).height,A=!!(T&&T<B),w=!!(T&&T<F);return(0,re.jsxs)("li",{ref:t,className:de()(ra,(n={},(0,l.Z)(n,ia,u&&_),(0,l.Z)(n,aa,d),(0,l.Z)(n,oa,p),n)),onClick:function(){b||(d?(k(S===f?Qe():Je(r)),k(Un({action_type:"click",action_intent:!1===E?"pause":"play",action_item_id:"tracklist-row",item_uri:g}))):k(Un({action_type:"click",action_intent:"track-not-available",action_item_id:"tracklist-row",item_uri:g})))},onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)},"data-testid":"tracklist-row-".concat(r),children:[!w&&(0,re.jsx)("div",{className:de()(pa,(0,l.Z)({},ia,u)),children:(0,re.jsx)(ma,{trackNumber:i,hoverOnTrack:y,isCurrentTrack:u,isPlayable:d,hasPlaybackContext:_,isPaused:E})}),A&&(0,re.jsxs)(re.Fragment,{children:[p&&(0,re.jsx)(sn,{className:ua}),(0,re.jsxs)("div",{className:sa,children:[(0,re.jsx)("h3",{dir:"auto",className:de()(la,(0,l.Z)({},ia,u)),children:a}),(0,re.jsx)("span",{className:ca,"aria-hidden":!0,children:"·"}),(0,re.jsx)("h4",{dir:"auto",className:de()(da,(0,l.Z)({},ia,u)),children:o})]})]}),!A&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("h3",{dir:"auto",className:de()(la,(0,l.Z)({},ia,u)),children:a}),(0,re.jsxs)("h4",{className:de()(da,(0,l.Z)({},ia,u)),children:[p&&(0,re.jsx)(sn,{className:ua}),o]}),(0,re.jsx)("div",{className:de()(va,(0,l.Z)({},ia,u)),children:na(s)})]})]})}));const Ea="S8jW_8C95koFs3fXJ4ea",ba="O0ZFaBo1FhgfIfjmtbO0",ga="B3yL1_I7T4OMWoEWZZnK",Sa="INDVIPJRWVVtV_2gTnMS";var ka=function(e){var t=e.trackList,n=void 0===t?[]:t,r=e.backgroundColor,i=e.className,a=(0,Q.useState)(!1),o=(0,_e.Z)(a,2),s=o[0],c=o[1],u=(0,Q.useContext)(Mn).height,l=(0,R.v9)((function(e){var t,n;return null!==(t=null===(n=e.playback)||void 0===n?void 0:n.hasContext)&&void 0!==t&&t})),d=(0,R.v9)(ya),p=(0,Q.useContext)(pe);(0,Q.useEffect)((function(){return c(!!(u&&u<F))}),[u]);var f=(0,Q.useCallback)((function(e){var t=e.uid;return!(!t||!l)&&t===d}),[l,d]),v=(0,Q.useState)(0),h=(0,_e.Z)(v,2),y=h[0],m=h[1],_=n[y];(0,Q.useEffect)((function(){var e=n.findIndex(f);m(e<0?0:e)}),[f,n]);var E=(0,Q.useRef)(null),b=(0,Q.useRef)(null);return(0,Q.useEffect)((function(){E.current&&E.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),[y]),(0,Q.useEffect)((function(){b.current&&!l&&y===n.length-1&&b.current&&b.current.scrollTo({top:0,behavior:"smooth"})}),[y,l,n.length]),(0,re.jsx)("div",{className:de()(Ea,i),style:{"--background-color":r},"data-testid":"tracklist",children:(0,re.jsx)("div",{className:ba,children:(0,re.jsx)("div",{ref:b,className:ga,children:s?_&&(0,re.jsx)(_a,{index:y,uid:_.uid,trackNumber:y+1,title:_.title,subtitle:_.subtitle,duration:_.duration||0,isExplicit:_.isExplicit,isCurrentTrack:!0,isPlayable:_.isPlayable}):(0,re.jsx)("ol",{className:Sa,"aria-label":p.get("spe.track_list"),children:n.map((function(e,t){return(0,re.jsx)(_a,{ref:f(e)?E:void 0,index:t,uid:e.uid,trackNumber:t+1,title:e.title,subtitle:e.subtitle,duration:e.duration||0,isExplicit:e.isExplicit,isCurrentTrack:f(e),isPlayable:e.isPlayable},e.uid)}))})})})})},Ta=function(e){var t=e.backgroundColor;return(0,re.jsx)("div",{className:Ai,style:{"--background-color":t}})};const Aa=function(){var e=(0,Q.useState)(32),t=(0,_e.Z)(e,2),n=t[0],r=t[1],i=(0,R.v9)((function(e){var t;return{backgroundColor:e.data.backgroundColor,initialized:e.machineState.initialized,showOverflowMenu:e.machineState.showOverflowMenu,isMobile:e.settings.isMobile,playbackMode:e.machineState.playbackMode,trackList:null===(t=e.data.entity)||void 0===t?void 0:t.trackList}})),a=i.backgroundColor,o=i.initialized,s=i.showOverflowMenu,c=i.isMobile,u=i.playbackMode,l=i.trackList,d=(0,R.I0)(),p=(0,Q.useContext)(pe),f=(0,Q.useCallback)((function(){return"ontouchstart"in document.documentElement?"touchstart":"mouseover"}),[]),v=(0,Q.useCallback)((function(){document.removeEventListener(f(),v),d({type:Zr}),d(Un({action_type:"interacted",action_intent:f()}))}),[d,f]);(0,Q.useEffect)((function(){return d({type:"MOUNTED"}),document.addEventListener(f(),v),function(){document.removeEventListener(f(),v)}}),[d,v,f]);var h=Q.useContext(Mn),y=h.width,m=h.height;(0,Q.useEffect)((function(){m&&y&&r(function(e,t,n){return!(e>=B&&t>=H)||n&&n.length?e>=F?24:16:32}(m,y,l))}),[l,m,y]);var _=pt("embed_player_p").embeddedEntity;return(0,re.jsxs)("div",{"data-testid":"embed-widget-container",className:de()("encore-dark-theme ".concat(wi," embed-widget-container"),{"has-track-list":Boolean(l)}),children:[(0,re.jsxs)("div",{"data-testid":"initialized-".concat(o),className:wi,children:[(0,re.jsxs)("div",{className:Oi,children:[(0,re.jsx)(Ta,{backgroundColor:a}),(0,re.jsx)(ur,{}),(0,re.jsx)("div",{className:Ni,children:u!==On.UNKNOWN&&(0,re.jsx)(Ti,{})}),(0,re.jsx)(dr,{className:Ri,ariaLabel:p.get("play_on_spotify"),onClick:function(){d(Un({action_type:"click",action_intent:"deeplink",action_item_id:"spotify-logo"}))},link:_,isMobile:c,iconSize:n})]}),(null==l?void 0:l.length)&&(0,re.jsx)(ka,{className:Pi,backgroundColor:a,trackList:l})]}),u!==On.UNKNOWN&&(0,re.jsx)(Ur,{onClose:function(){d({type:Mr})},visible:s}),u!==On.UNKNOWN&&(0,re.jsx)(ta,{})]})};var Ra=n(20854),wa=function(e){var t=e.instance,n=e.children;return(0,re.jsx)(At.Provider,{value:{instance:t},children:n})};function Oa(e,t,n){var r=e.getState().settings.rtl,i=(0,P.Z)(function(e){var t=e?[z.Z]:[];return{key:"embed-".concat(e?"rtl":"ltr"),stylisPlugins:t}}(r));return(0,re.jsx)(R.zt,{store:e,children:(0,re.jsx)(wa,{instance:null!=n?n:null,children:(0,re.jsx)(w.C,{value:i,children:(0,re.jsxs)(Ra.t.Provider,{value:{isUsingKeyboard:!1},children:[(0,re.jsx)(O.xB,{styles:M}),(0,re.jsx)(fe,{instance:t,children:(0,re.jsx)(xn,{children:(0,re.jsx)(Aa,{})})})]})})})})}(0,N.vJ)(["",""],x.styles);var Pa=n(41265),Na=n(61958),Ia=n(42433),Da=function(e){var t=new URL(e.href).searchParams.get("t");if(t){var n=parseInt(t,10);if(n>0)return n}return null};function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ma={featureIdentifier:"embed",featureVersion:"3",referrerIdentifier:"PlayerStub_UnknownReferrer"},xa=function(e,t,n){var r;return t===On.PREVIEW?Ca(Ca({},e),{},{metadata:Ca(Ca({},e.metadata),{},{externalResolvedUrl:null===(r=e.metadata)||void 0===r?void 0:r.audioPreviewUrl,previewApplied:"yes"})}):Ca(Ca({},e),{},{metadata:Ca(Ca({},e.metadata),{},{useAuthEndpoint:n?"yes":""})})},ja=function(e,t){return t.mediaType!==Ve?e:Ca(Ca({},e),{},{metadata:Ca(Ca({},e.metadata),{},{mediaType:"video"})})},Ua=function(e,t){var n=null==e?void 0:e.findIndex((function(e,n){return n>t&&e.isPlayable}));return null!=n?n:-1},Za=function(e,t){for(var n=t-1;n>=0;n--)if(e&&e[n].isPlayable)return n;return-1},Ka=function(e,t,n){return null!=e&&e.trackList&&t===On.PREVIEW?or(e.trackList[null!=n?n:0]):or(e)};const Ya=function(e){return function(t){var n,r;return e.then((function(e){var i,a,o=e.playerAPI,s=e.playbackAPI;r=s,null===(i=n=o)||void 0===i||i.getEvents().addListener(Ia.rg.UPDATE,(function(e){var n,r=t.getState(),i=r.playback,a=r.machineState,o=r.data;if(e.data&&!e.data.hasContext&&(null==i?void 0:i.hasContext)&&a.playbackMode===On.PREVIEW&&(null===(n=o.entity)||void 0===n?void 0:n.trackList)&&o.entity.trackList.length>a.currentPreviewTrackIndex+1){var s,c=Ua(null===(s=o.entity)||void 0===s?void 0:s.trackList,a.currentPreviewTrackIndex);c>0&&t.dispatch(Je(c))}t.dispatch(function(e){return{type:Ue,state:e}}(e.data))})),null===(a=n)||void 0===a||a.getEvents().addListener(Ia.rg.ERROR,(function(e){var n;t.dispatch((n=e.data,{type:Ze,error:n}))}))})),function(e){return function(){var i=(0,k.Z)(A().mark((function i(a){var o,s,c,u,l,d,p,f,v,h,y,m,_,E,b,g,S,k,T,R,w,O,P,N,I,D,L,C,M,x,j,U,Z,K,Y,F,B,G,H,W,q,V;return A().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:p=t.getState(),f=p.playback,v=p.settings,h=p.machineState,y=p.data.entity,m=v.session.isAnonymous,_=h.playbackMode===On.PREVIEW,E=e(a),b=Ka(y,h.playbackMode),i.t0=a.type,i.next=i.t0===xe?8:i.t0===Me?15:i.t0===je?19:"RESUME"===i.t0?21:i.t0===Ce?23:i.t0===Ke?25:i.t0===Fe?27:i.t0===Ye?29:i.t0===Be?31:i.t0===Ge?33:"MUTE"===i.t0?35:"UNMUTE"===i.t0?38:41;break;case 8:if(null==y||!y.trackList||!_||null!=f&&f.hasContext){i.next=13;break}return g=Ua(null==y?void 0:y.trackList,-1),i.abrupt("return",h.currentPreviewTrackIndex===(null==y?void 0:y.trackList.length)-1?t.dispatch(Je(g)):t.dispatch(Je(h.currentPreviewTrackIndex)));case 13:null!=f&&f.hasContext&&!1===(null==f?void 0:f.isPaused)?null===(S=n)||void 0===S||S.pause():null!=f&&f.hasContext&&!0===(null==f?void 0:f.isPaused)?null===(k=n)||void 0===k||k.resume():(R=Da(window.location),w=xa(ja(b,a),h.playbackMode,!m),null===(T=n)||void 0===T||T.play(w,Ma,{seekTo:R?1e3*R:void 0}));case 14:return i.abrupt("break",42);case 15:return P=Da(window.location),N=xa(ja(b,a),h.playbackMode,!m),null===(O=n)||void 0===O||O.play(N,Ma,{seekTo:P?1e3*P:void 0}),i.abrupt("break",42);case 19:return _?(D=Ka(y,h.playbackMode,a.index),L=xa(ja(D,a),h.playbackMode,!m),null===(I=n)||void 0===I||I.play(L,Ma),t.dispatch((A=a.index,{type:We,index:A}))):(M=xa(ja(b,a),h.playbackMode,!m),null===(C=n)||void 0===C||C.play(M,Ma,{skipTo:{index:a.index}})),i.abrupt("break",42);case 21:return null===(o=n)||void 0===o||o.resume(),i.abrupt("break",42);case 23:return null===(s=n)||void 0===s||s.pause(),i.abrupt("break",42);case 25:return a.time&&Number.isFinite(a.time)?null===(x=n)||void 0===x||x.seekTo(a.time):a.percentage&&Number.isFinite(a.percentage)&&(Z=(null==f?void 0:f.duration)||Number(null===(j=b.metadata)||void 0===j?void 0:j.duration),null===(U=n)||void 0===U||U.seekTo(a.percentage*Z)),i.abrupt("break",42);case 27:return null===(c=n)||void 0===c||c.seekForward(15e3),i.abrupt("break",42);case 29:return null===(u=n)||void 0===u||u.seekBackward(15e3),i.abrupt("break",42);case 31:return _?(B=null!==(Y=null==y||null===(F=y.trackList)||void 0===F?void 0:F.length)&&void 0!==Y?Y:0,h.currentPreviewTrackIndex<B-1?(G=Ua(null==y?void 0:y.trackList,h.currentPreviewTrackIndex))>0&&t.dispatch(Je(G)):null===(H=n)||void 0===H||H.skipToNext()):null===(K=n)||void 0===K||K.skipToNext(),i.abrupt("break",42);case 33:return _?f&&null!==f.positionAsOfTimestamp&&(f.positionAsOfTimestamp>3e3||0===h.currentPreviewTrackIndex)?null===(q=n)||void 0===q||q.seekTo(0):h.currentPreviewTrackIndex>0&&(V=Za(null==y?void 0:y.trackList,h.currentPreviewTrackIndex))>=0&&t.dispatch(Je(V)):null===(W=n)||void 0===W||W.skipToPrevious(),i.abrupt("break",42);case 35:return null===(l=r)||void 0===l||l.setVolume(0),t.dispatch($e(0)),i.abrupt("break",42);case 38:return null===(d=r)||void 0===d||d.setVolume(100),t.dispatch($e(100)),i.abrupt("break",42);case 41:return i.abrupt("break",42);case 42:return i.abrupt("return",E);case 43:case"end":return i.stop()}var A}),i)})));return function(e){return i.apply(this,arguments)}}()}}};var Fa=n(13907);function Ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ba(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ba(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ha=function(e){return function(t){var n,r=t.getState(),i=r.data.entity,a=r.settings.session.isAnonymous,o=void 0!==a&&a,s=null!==(n=null==i?void 0:i.uri)&&void 0!==n?n:"";function c(t){return e.send((0,Fa.l)(t))}return function(e){return function(n){var r=t.getState(),i=r.data,a=r.settings,u=(0,it.EC)(i.embeded_entity_uri),l={device_type:a.isMobile||a.isTablet?"mobile":"desktop",view_uri:s,entity_uri:null==u?void 0:u.toURI(),entity_type:null==u?void 0:u.type,embed_is_video:a.isVideoEmbed,page_url:window.location.href,referrer:document.referrer,viewport_width:window.innerWidth,viewport_height:window.innerHeight,is_authenticated:!o};switch(n.type){case Kr:c(Ga(Ga({},l),{},{action_type:"pageview",action_intent:null,action_item_id:null,item_uri:null}));break;case jn:c(Ga(Ga({},l),{},{action_type:n.interactionData.action_type,action_intent:n.interactionData.action_intent,action_item_id:n.interactionData.action_item_id,item_uri:n.interactionData.item_uri}))}return e(n)}}}};var Wa=function(){return"undefined"==typeof window||void 0===window.gtag||void 0===window.google_tag_manager};const qa=function(){return function(e){return function(t){if(t.type===jn)!function(e,t,n){Wa()||window.gtag("event",t,{event_category:e,event_label:n})}(t.interactionData.action_type,t.interactionData.action_intent,t.interactionData.item_id);return e(t)}}};function Va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qa={initialized:!1,showOverflowMenu:!1,playbackMode:On.UNKNOWN,currentPreviewTrackIndex:0};const Ja=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zr:return za(za({},e),{},{initialized:!0});case xr:return za(za({},e),{},{showOverflowMenu:!0});case Mr:return za(za({},e),{},{showOverflowMenu:!1});case In:return za(za({},e),{},{playbackMode:t.playbackMode});case We:return za(za({},e),{},{currentPreviewTrackIndex:t.index});default:return e}};function Xa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xa(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const eo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:return $a($a({},e),t.state);case Kr:var n=Da(window.location);return n?$a($a({},e),{},{positionAsOfTimestamp:1e3*n}):e;case Ze:return $a($a({},e),{},{isDisabled:!0,error:$a($a({},t.error),{},{message:t.error.message})});case He:return $a($a({},e),{},{volume:t.volume});default:return e}};const to=function(e){return(0,Pa.UY)({data:function(){return e.data},settings:function(){return e.settings},machineState:Ja,playback:eo})};var no=("object"===("undefined"==typeof window?"undefined":(0,s.Z)(window))&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,Pa.qC);function ro(e){return new Promise((function(t){return setTimeout(t,e)}))}function io(e){return ao.apply(this,arguments)}function ao(){return ao=(0,k.Z)(A().mark((function e(t){var n,r,i=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:2,r=i.length>2&&void 0!==i[2]?i[2]:1e3,e.prev=2,e.next=5,t();case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(2),!n){e.next=14;break}return e.next=13,ro(r);case 13:return e.abrupt("return",io(t,n-1,r));case 14:throw new Error("Import failed after retry.",{cause:e.t0});case 15:case"end":return e.stop()}}),e,null,[[2,8]])}))),ao.apply(this,arguments)}var oo=function(){var e=(0,k.Z)(A().mark((function e(t,r,i){var a,o,s,c;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!Qn(r),!e.t0){e.next=7;break}return e.next=4,i;case 4:e.t1=e.sent,e.t2=On.FULL,e.t0=e.t1===e.t2;case 7:if(!e.t0){e.next=13;break}return e.next=10,io((function(){return Promise.all([n.e(925),n.e(899),n.e(446)]).then(n.bind(n,76634))}));case 10:return a=e.sent,o=a.createHarmonyPlayerAndPlayback,e.abrupt("return",o(t));case 13:return e.next=15,io((function(){return Promise.all([n.e(925),n.e(262),n.e(768)]).then(n.bind(n,97520))}));case 15:return s=e.sent,c=s.createOverturePlayerAndPlayback,e.abrupt("return",c(t,r));case 18:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),so=n(37995),co=n(71249),uo=n(6227);function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fo,vo,ho=["open.spotifycdn.com","xpui.app.spotify.com"];function yo(e){"undefined"!=typeof window&&window.addEventListener("message",(function(t){var n;switch(null===(n=t.data)||void 0===n?void 0:n.command){case vo.PLAY:e.dispatch(function(){return{type:Me,mediaType:arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe}}()),e.dispatch(Un({page:window.location.pathname,action_intent:"play",action_type:"iframe-api"}));break;case vo.TOGGLE_PLAY:e.dispatch(Qe()),e.dispatch(Un({page:window.location.pathname,action_intent:"toggle",action_type:"iframe-api"}));break;case vo.SEEK:var r,i=parseInt(null===(r=t.data)||void 0===r?void 0:r.timestamp,10);e.dispatch({type:Ke,time:1e3*i}),e.dispatch(Un({page:window.location.pathname,action_intent:"seek",action_type:"iframe-api"}));break;case vo.LOAD_COMPLETE_ACK:e.dispatch(Un({page:window.location.pathname,action_intent:"load-episode",action_type:"iframe-api"}));break;default:return}}))}function mo(e){var t=e.playerAPI;"undefined"!=typeof window&&window.parent&&(window.parent.postMessage({type:fo.READY},"*"),null==t||t.getEvents().addListener(Ia.rg.UPDATE,(function(e){if(e.data){var t=e.data,n=t.isPaused,r=t.isBuffering,i=t.duration,a=t.positionAsOfTimestamp;window.parent.postMessage({type:fo.PLAYBACK_UPDATE,payload:{isPaused:n,isBuffering:r,duration:i,position:a}},"*")}})))}!function(e){e.READY="ready",e.PLAYBACK_UPDATE="playback_update"}(fo||(fo={})),function(e){e.PLAY="play",e.PAUSE="pause",e.TOGGLE_PLAY="toggle",e.SEEK="seek",e.LOAD_COMPLETE_ACK="load_complete_ack"}(vo||(vo={}));var _o=n(50703),Eo=n(30106),bo=n(54876),go=n(53533),So=n(67174);function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function To(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ao="data-translations-url-for-locale";function Ro(){return(Ro=(0,k.Z)(A().mark((function e(){var t,n,r,i,a,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.head.querySelector("link[".concat(Ao,"]")),n=t.getAttribute("href"),r=t.getAttribute(Ao),i=new AbortController,a=setTimeout((function(){return i.abort()}),5e3),e.next=7,fetch(n,{signal:i.signal}).then((function(e){return e.json()})).catch((function(){return{}}));case 7:return o=e.sent,clearTimeout(a),e.abrupt("return",{translations:o,translationsUrl:n,locale:r});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wo,Oo=n(98355),Po=n(68802),No=n(27384),Io=n(62671),Do=n(86327),Lo=n(2758),Co=n(48162),Mo=(0,Io.hh)(Do.H).addMiddleware(Po.a).addMiddleware(No.d).addMiddleware(Lo.Q).addMiddleware(Co.Y),xo=n(26104),jo=n(56698),Uo=n(66249),Zo=n(6663),Ko=n(91285);function Yo(e){var t="".concat("https://apresolve.spotify.com/","?type=").concat(wo.DEALER,"&type=").concat(wo.WEBGATE);return(0,k.Z)(A().mark((function n(){var r,i,a,o,s,c,u,l;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new AbortController,i=setTimeout((function(){return r.abort()}),e),n.prev=2,n.next=5,fetch(t,{signal:r.signal});case 5:return o=n.sent,clearTimeout(i),n.next=9,o.json();case 9:a=n.sent,n.next=17;break;case 12:if(n.prev=12,n.t0=n.catch(2),!r.signal.aborted){n.next=16;break}throw new Error("x-resolve request timed out after ".concat(e," ms"));case 16:throw n.t0;case 17:if(Array.isArray(a[wo.DEALER])&&Array.isArray(a[wo.WEBGATE])&&0!==a[wo.DEALER].length&&0!==a[wo.WEBGATE].length){n.next=19;break}throw new Error("x-resolve responded with incomplete results");case 19:return s=a[wo.DEALER][0],c=a[wo.WEBGATE][0],u="wss://".concat(s.replace(/:443$/,"")),l="https://".concat(c.replace(/:443$/,"")),n.abrupt("return",{dealer:u,webgate:l,webapi:"https://api.spotify.com/"});case 24:case"end":return n.stop()}}),n,null,[[2,12]])})))}!function(e){e.DEALER="dealer",e.WEBGATE="spclient"}(wo||(wo={}));function Fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timeout,n=void 0===t?3e3:t,r=Yo(n),i=(0,Ko.Q)({});return function(){var e=(0,k.Z)(A().mark((function e(t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(t);case 3:case 11:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=11,i(t);case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}var Bo=n(21151);function Go(e){return Date.now()>=e.accessTokenExpirationTimestampMs}function Ho(){var e,t,n=null;try{var r=document.getElementById("config"),i=r?JSON.parse(r.innerHTML):{};["accessToken","accessTokenExpirationTimestampMs","isAnonymous"].every((function(e){return e in i}))&&(n=i)}catch(a){}return e=(0,k.Z)(A().mark((function e(){var t,r,i,a,o,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||Go(n)){e.next=4;break}t=n,e.next=10;break;case 4:return e.next=6,c=S.b.getInstance(),u="transport",c.build().withHost(Bo.SW).withPath("/get_access_token").withQueryParameters({reason:u,productType:"embed"}).withoutMarket().withoutAuthorization().withEndpointIdentifier("/get_access_token").send();case 6:if(r=e.sent,null!==(t=r.body)){e.next=10;break}throw new Error("Token is currently unavailable.");case 10:return a=(i=t).accessToken,o=i.accessTokenExpirationTimestampMs,s=Math.floor(((o||0)-Date.now())/1e3),e.abrupt("return",[a,s]);case 13:case"end":return e.stop()}var c,u}),e)}))),t=null,(0,k.Z)(A().mark((function n(){var r;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=2;break}return n.abrupt("return",t);case 2:return t=e(),n.prev=3,n.next=6,t;case 6:r=n.sent;case 7:return n.prev=7,t=null,n.finish(7);case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}}),n,null,[[3,,7,10]])})))}var Wo=function(e){var t=e.settings.session;return Boolean(!t.accessToken||t.isAnonymous)},qo=(n(8090),n(14042),n(47370),{kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"addEntitiesToLibrary"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addLibraryItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"library"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]}}]}),Vo={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"removeEntitiesFromLibrary"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeLibraryItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"library"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]}}]},zo=(n(40554),n(4377));function Qo(e){return"OperationDefinition"===e.kind}function Jo(e){var t=e.definitions.filter(Qo);if(0===t.length)throw new Error("No GraphQL operation definition found in document!");if(t.length>1)throw new Error("Too many GraphQL operation definitions found in document! Expected exactly one.");var n=(0,_e.Z)(t,1)[0];if(void 0===n.name)throw new Error("Nameless GraphQL operations are not supported!");return{type:n.operation,name:n.name.value,body:(0,zo.S)(e)}}var Xo={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"areAlbumsInLibrary"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"albums"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}}]}}]}}]},$o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"areArtistsInLibrary"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}}]}}]}}]},es={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"areTracksInLibrary"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}}]}}]}}]},ts={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"areShowsInLibrary"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"podcasts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Audiobook"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Podcast"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}}]}}]}}]},ns={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"areEpisodesInLibrary"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uris"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"episodes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"Variable",name:{kind:"Name",value:"uris"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Error"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Chapter"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Episode"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"saved"}}]}}]}}]}}]};function rs(e,t){return e.reduce((function(e,n){var r=t(n);return(e[r]=e[r]||[]).push(n),e}),{})}function is(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return as(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return as(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function as(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function os(e){return e===it.JM.ALBUM||e===it.JM.ARTIST||e===it.JM.TRACK||e===it.JM.SHOW||e===it.JM.EPISODE}function ss(e){return e.map((function(e){var t;return null!==(t="saved"in e?e.saved:null)&&void 0!==t&&t}))}var cs=function(){function e(t){(0,c.Z)(this,e),this.requestGQL=t,this._events=new Dt,this._cache=new Map}var t,n,r,i;return(0,u.Z)(e,[{key:"getEvents",value:function(){return this._events}},{key:"add",value:(i=(0,k.Z)(A().mark((function e(){var t,n,r,i,a,o,s,c=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=c.length,n=new Array(t),r=0;r<t;r++)n[r]=c[r];if(n.length){e.next=3;break}return e.abrupt("return");case 3:return n.forEach((function(e){var t=(0,it.EC)(e);if(!t||!os(t.type))throw new Error("Unknown URI type: ".concat(null==t?void 0:t.type))})),e.prev=4,e.next=7,this.requestGQL(qo,{uris:n});case 7:if((i=e.sent)&&!i.errors){e.next=10;break}throw new Error("GraphQL query failed");case 10:if(null==i||!i.errors){a=is(n);try{for(a.s();!(o=a.n()).done;)s=o.value,this._cache.set(s,!0),this._events.emit(Tt.UPDATE_ITEM,{uri:s,isInLibrary:!0})}catch(u){a.e(u)}finally{a.f()}}e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(4),new Error("Error adding ".concat(JSON.stringify(n)," to library: ").concat(e.t0));case 16:case"end":return e.stop()}}),e,this,[[4,13]])}))),function(){return i.apply(this,arguments)})},{key:"remove",value:(r=(0,k.Z)(A().mark((function e(){var t,n,r,i,a,o,s,c=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=c.length,n=new Array(t),r=0;r<t;r++)n[r]=c[r];if(n.length){e.next=3;break}return e.abrupt("return");case 3:return n.forEach((function(e){var t=(0,it.EC)(e);if(!t||!os(t.type))throw new Error("Unknown URI type: ".concat(null==t?void 0:t.type))})),e.prev=4,e.next=7,this.requestGQL(Vo,{uris:n});case 7:if((i=e.sent)&&!i.errors){e.next=10;break}throw new Error("GraphQL query failed");case 10:for(a=0,o=n;a<o.length;a++)s=o[a],this._cache.set(s,!1),this._events.emit(Tt.UPDATE_ITEM,{uri:s,isInLibrary:!1});e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(4),new Error("Error removing ".concat(JSON.stringify(n)," from library: ").concat(e.t0));case 16:case"end":return e.stop()}}),e,this,[[4,13]])}))),function(){return r.apply(this,arguments)})},{key:"containsEntitiesOfType",value:(n=(0,k.Z)(A().mark((function e(t,n){var r,i,a,o,s,c,u=this;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length){e.next=2;break}return e.abrupt("return",[]);case 2:r=function(){var e=(0,k.Z)(A().mark((function e(t){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.requestGQL(t,{uris:n});case 2:if((r=e.sent)&&!r.errors){e.next=5;break}throw new Error("GraphQL query failed");case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.t0=t,e.next=e.t0===it.JM.ALBUM?6:e.t0===it.JM.ARTIST?10:e.t0===it.JM.TRACK?14:e.t0===it.JM.SHOW?18:e.t0===it.JM.EPISODE?22:26;break;case 6:return e.next=8,r(Xo);case 8:return i=e.sent,e.abrupt("return",ss(i.data.albums));case 10:return e.next=12,r($o);case 12:return a=e.sent,e.abrupt("return",ss(a.data.artists));case 14:return e.next=16,r(es);case 16:return o=e.sent,e.abrupt("return",ss(o.data.tracks));case 18:return e.next=20,r(ts);case 20:return s=e.sent,e.abrupt("return",ss(s.data.podcasts));case 22:return e.next=24,r(ns);case 24:return c=e.sent,e.abrupt("return",ss(c.data.episodes));case 26:throw new Error("Unknown URI type: ".concat(t));case 27:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"containsSync",value:function(e){return this._cache.get(e)}},{key:"contains",value:(t=(0,k.Z)(A().mark((function e(){var t,n,r,i,a,o,s=this,c=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=c.length,r=new Array(n),i=0;i<n;i++)r[i]=c[i];if(a=[],r.forEach((function(e){var n=s._cache.get(e);void 0!==n?a.push(n):t.push(e)})),a.length!==r.length){e.next=6;break}return e.abrupt("return",a);case 6:return o=rs(t,(function(e){var t=(0,it.EC)(e);if(null===t||!os(t.type))throw new Error("Unknown URI type: ".concat(null==t?void 0:t.type));return t.type})),e.next=9,Promise.all(Object.entries(o).map(function(){var e=(0,k.Z)(A().mark((function e(t){var n,r,i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,_e.Z)(t,2),r=n[0],i=n[1],e.next=3,s.containsEntitiesOfType(r,i);case 3:a=e.sent,i.forEach((function(e,t){s._cache.set(e,a[t]),s._events.emit(Tt.UPDATE_ITEM,{uri:e,isInLibrary:a[t]})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return e.abrupt("return",r.map((function(e){return s._cache.get(e)})));case 10:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();n(27525),n(91080),n(57888),n(41940),n(85769),n(85825),n(85752),n(28489),n(91414),n(18796),n(11875),n(17612),n(40239),n(83337),n(54290),n(33192),n(32272),n(17957),n(64826),n(20716),n(9829),n(52824),n(94603),n(79489),n(29609),n(64233),n(39125),n(35292),n(5630),n(59699),n(91564);function us(e){if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t}n(10427);var ls=function(){var e=(0,k.Z)(A().mark((function e(t){var n,r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=us(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ds=(0,u.Z)((function e(){(0,c.Z)(this,e)}));(0,l.Z)(ds,"encode",us),(0,l.Z)(ds,"hash",ls);var ps=n(26458);function fs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fs(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hs(e){return ys.apply(this,arguments)}function ys(){return(ys=(0,k.Z)(A().mark((function e(t){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ds.hash(t.body);case 2:return n=e.sent,e.abrupt("return",{persistedQuery:{version:1,sha256Hash:n}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ms(e,t,n,r,i){return _s.apply(this,arguments)}function _s(){return(_s=(0,k.Z)(A().mark((function e(t,n,r,i,a){var o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.name,e.abrupt("return",t.build().withHost(Bo.wI).withMethod("GET").withoutMarket().withPath("/query").withJsonContentType().withQueryParameters(vs({operationName:o,variables:JSON.stringify(r),extensions:JSON.stringify(i)},a)).withEndpointIdentifier("/query/".concat(o)).send());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Es(e,t,n,r,i){return bs.apply(this,arguments)}function bs(){return(bs=(0,k.Z)(A().mark((function e(t,n,r,i,a){var o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.name,e.abrupt("return",t.build().withHost(Bo.wI).withMethod("POST").withoutMarket().withPath("/query").withJsonContentType().withBody({variables:r,operationName:o,extensions:i}).withQueryParameters(vs({},a)).withEndpointIdentifier("/query/".concat(o)).send());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gs(e,t,n,r,i){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,k.Z)(A().mark((function e(t,n,r,i,a){var o,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.name,s=n.body,e.abrupt("return",t.build().withHost(Bo.wI).withMethod("POST").withoutMarket().withPath("/query").withJsonContentType().withBody({operationName:o,variables:r,query:s,extensions:i}).withQueryParameters(vs({},a)).withEndpointIdentifier("/query/".concat(o)).send());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ks(e,t,n){return Ts.apply(this,arguments)}function Ts(){return Ts=(0,k.Z)(A().mark((function e(t,n,r){var i,a,o,s,c,u,l=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>3&&void 0!==l[3]?l[3]:{},e.next=3,hs(n);case 3:if(a=e.sent,e.prev=4,"mutation"!==n.type){e.next=11;break}return e.next=8,Es(t,n,r,a,i);case 8:c=e.sent,e.next=14;break;case 11:return e.next=13,ms(t,n,r,a,i);case 13:c=e.sent;case 14:if(null===(o=c.body)||void 0===o||null===(s=o.errors)||void 0===s||!s.some((function(e){return"PersistedQueryNotFound"===e.message}))){e.next=16;break}return e.abrupt("return",gs(t,n,r,a,i));case 16:return e.abrupt("return",c);case 19:if(e.prev=19,e.t0=e.catch(4),u=405,!(e.t0 instanceof ps.m&&e.t0.status===u)){e.next=24;break}return e.abrupt("return",gs(t,n,r,a,i));case 24:throw e.t0;case 25:case"end":return e.stop()}}),e,null,[[4,19]])}))),Ts.apply(this,arguments)}var As=n(82961);var Rs=function(){return(URL&&URL.createObjectURL?As.C.create({noServerCertificate:!0,transport:{request:function(){return Promise.reject(new TypeError("Unexpected call to mock Transport.request"))}}}).then((function(){return!0})):Promise.reject(new TypeError("URL.createObjectURL is not supported"))).catch((function(e){return!1}))};var ws=function(e,t){var n=Qn(t);return n&&(e||t.data.passthrough!==ze)?On.FULL:n||!e||Wo(t)||function(e){var t=e.settings;return Boolean(t.isPremiumOnlyMarket)}(t)||function(e){var t=e.settings;return Boolean(t.isMobile)}(t)||function(e){var t=e.settings;return Boolean(t.isSafari)}(t)?On.PREVIEW:On.FULL};function Os(e){var t=e.translations,n=e.locale,r=(0,ot.K)("initial-state"),i=(0,ot.Z)("config").correlationId,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{useDealer:!1},t=(0,jo.createBaseTransport)({providers:{endpoints:Fo(),token:Ho()},disconnectBeforeUnload:!0,reconnectionRetries:3,requestMode:"fetch"});return e.useDealer&&t.addPlugin(Uo.dv,{WebSocket}),t.on(jo.TransportEvent.CONNECTED,(function(){t.isAuthenticated()||t.authenticate()})),t.on(jo.TransportEvent.DISCONNECTED,(function(){t.connect()})),t.connect(),(0,Zo.J)(t),t}({useDealer:!Wo(r)});(0,bo.p1)("embed-player",a),function(){So.BrowserMetrics.getPageLoadTime().then((function(e){(0,bo.sQ)({metric_type:So.MetricTypes.TIMER,what:"time-to-page-load-nanoseconds",value:(0,So.asNanoseconds)(So.Time.fromMillis(e).asNanos()),tags:{pathname:(0,bo.Xo)(window.location)}})})).catch((function(){})),So.BrowserMetrics.getTimeToFirstPaint().then((function(e){(0,bo.sQ)({metric_type:So.MetricTypes.TIMER,what:"time-to-first-paint-nanoseconds",value:(0,So.asNanoseconds)(So.Time.fromMillis(e).asNanos()),tags:{pathname:(0,bo.Xo)(window.location)}})})).catch((function(){})),So.BrowserMetrics.getTimeToFirstContentfulPaint().then((function(e){(0,bo.sQ)({metric_type:So.MetricTypes.TIMER,what:"time-to-first-contentful-paint-nanoseconds",value:(0,So.asNanoseconds)(So.Time.fromMillis(e).asNanos()),tags:{pathname:(0,bo.Xo)(window.location)}})})).catch((function(){}));var e=function(e){(0,bo.sQ)(So.BrowserMetrics.getWebVitalsMetric(To(To({},e),{},{label:e.name}),{pathname:(0,bo.Xo)(window.location)}))};(0,go.mr)(e),(0,go.Fu)(e)}();var s=function(e,t,n){return(0,_o.mi)({transport:e,suppressPersist:!1,context:[(0,Eo.jx)(t),(0,Eo.UR)({version:"embed_2022-12-10_1670668187480_c1fb235"}),(0,Eo.Mb)(),(0,Eo.sr)(n)]})}(a,r.settings.clientId,i),c=new _;c.setDictionary(t),c.setLocale(n),S.b.setSession(r.settings.session);var u,l=new cs((u=S.b.getInstance(),function(){var e=(0,k.Z)(A().mark((function e(t,n){var r,i,a,o=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]?o[2]:{},"subscription"!==(i=Jo(t)).type){e.next=4;break}throw new Error("GraphQL subscriptions are not supported!");case 4:return e.next=6,ks(u,i,n,r);case 6:return a=e.sent,e.abrupt("return",a.body);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));!function(){if("requestMediaKeySystemAccess"in navigator){var e=navigator.requestMediaKeySystemAccess;navigator.requestMediaKeySystemAccess=function(){var t=(0,k.Z)(A().mark((function t(n,r){var i;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.race([e.call(navigator,n,r),new Promise((function(e,t){return setTimeout((function(){t(new Error("It looks like navigator.requestMediaKeySystemAccess is taking too long!\n                If you are seeing this, then it is likely that the user-agent you are using has a bug where this\n                API is not completing. Please contact the relevant team to have them fix this bug."))}),100)}))]);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}();var d=Rs().then((function(e){return ws(e,r)})),p=oo(a,r,d),f=function(e,t,n){return(0,Pa.MT)(to(e),e,no((0,Pa.md)(Ya(n),Ha(t),qa,Na.Z)))}(r,s,p);!function(e,t){yo(e),t.then(mo)}(f,p),d.then((function(e){f.dispatch(function(e){return{type:In,playbackMode:e}}(e)),e===On.PREVIEW&&f.dispatch(Un({page:window.location.pathname,action_intent:"play-preview-fallback",action_type:"warn",action_item_id:""}))}));var v=xo.VK.fromJSON((0,ot.K)("remote-configuration",JSON.stringify({}))),h=document.getElementById("root");(0,o.hydrate)((0,re.jsx)(Oo.nD,{resolver:Mo,context:{username:null},options:{clientId:"embed-player",timeout:2e4,transport:a,eventSender:s,installationId:i,initialConfiguration:v},initialConfiguration:v,children:Oa(f,c,l)}),h),g()}!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4?arguments[4]:void 0;(0,so.S1)(po(po({dsn:e,allowUrls:ho,sampleRate:.1,release:t},n),{},{integrations:[new uo.x],ignoreErrors:[/\/[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{12}\/main\.js/,/^NotFoundError: Failed to execute '(removeChild|insertBefore)' on 'Node': The node.*child.*this node.$/,/ResizeObserver loop limit exceeded/,"PresentationRequest",/DA97E0680A7030159BC0C0EE3A1D098E947A08E3/]})),(0,co.e)((function(e){var t=(0,ot.Z)("config").correlationId;t&&e.setUser({id:t}),Object.keys(r).forEach((function(t){e.setExtra(t,r[t])})),""!==document.referrer&&e.setExtra("referrer",document.referrer),i&&e.setTag("container",i)}))}("https://80341f4271be4aec89050e48a0e4553e@o22381.ingest.sentry.io/1409086","embed_2022-12-10_1670668187480_c1fb235"),function(){return Ro.apply(this,arguments)}().then((function(e){return Os({translations:e.translations,locale:e.locale})}))},72128:(e,t,n)=>{"use strict";n.d(t,{b:()=>B});var r,i=n(7403),a=n(56141),o=(n(27433),n(89674),n(63792)),s=n(75108),c=n(61351),u=n(28280),l=(n(72553),n(11584),n(58984),n(61025),n(24180),n(28897),n(78902),n(72511),n(26361),n(4203),n(67174)),d=n(54876),p=n(26458),f=(n(2637),n(81175),n(61942),n(6385),n(10817),n(86293),n(55668),n(37529),n(12130)),v=n(48466),h=n(24190),y=n(88158),m=n.n(y);n(71832),n(31711);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(){function e(){(0,i.Z)(this,e),this._accessToken=null,this._market="",this._headers=[],this._globalRequestHeaders=[],this._shouldSendMarket=!0,this._shouldSendGlobalHeaders=!0,this._locale=null,this._shouldSendLocale=!1,this._shouldSendAuthorization=!0,this._host="",this.path="",this.responseType="json",this.queryParameters=void 0,this._method="GET",this.jsonContentType=!1,this.body=null,this._endpointIdentifier=null,this._startTimestamp=null,this._includeCredentials=!1}var t;return(0,a.Z)(e,[{key:"getRequestImplementation",value:function(){return r}},{key:"accessToken",set:function(e){this._accessToken=e}},{key:"market",get:function(){return this._market},set:function(e){this._market=e}},{key:"locale",get:function(){return this._locale},set:function(e){this._locale=e}},{key:"globalRequestHeaders",get:function(){return this._globalRequestHeaders},set:function(e){this._globalRequestHeaders=e}},{key:"startTimestamp",get:function(){return this._startTimestamp}},{key:"host",get:function(){return this._host}},{key:"method",get:function(){return this._method}},{key:"endpointIdentifier",get:function(){return this._endpointIdentifier}},{key:"withHost",value:function(e){return this._host=e,this}},{key:"withPath",value:function(e){return this.path=e,this}},{key:"withResponseType",value:function(e){return this.responseType=e,this}},{key:"withEndpointIdentifier",value:function(e){return this._endpointIdentifier=e,this}},{key:"withQueryParameters",value:function(e){return this.queryParameters=e,this}},{key:"withBody",value:function(e){return this.body=e,this}},{key:"withMethod",value:function(e){return this._method=e,this}},{key:"withoutMarket",value:function(){return this._shouldSendMarket=!1,this}},{key:"withoutGlobalHeaders",value:function(){return this._shouldSendGlobalHeaders=!1,this}},{key:"withoutAuthorization",value:function(){return this._shouldSendAuthorization=!1,this}},{key:"withLocale",value:function(e){return this._shouldSendLocale=!0,e&&(this._locale=e),this}},{key:"withJsonContentType",value:function(){return this.jsonContentType=!0,this}},{key:"withHeaders",value:function(e){return this._headers=e,this}},{key:"withCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"onBeforeSend",value:function(e){}},{key:"onAfterSend",value:function(e){}},{key:"send",value:(t=(0,h.Z)(m().mark((function e(){var t,n,i,a=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=new r(this.method,"".concat(this._host).concat(this.path),this._shouldSendAuthorization),this._shouldSendMarket&&this.market&&(this.queryParameters=E(E({},this.queryParameters),{},{market:this.market})),this._shouldSendLocale&&this.locale&&(this.queryParameters=E(E({},this.queryParameters),{},{locale:this.locale})),this.locale&&t.addHeader("Accept-Language",this.locale),t.withQueryParameters(this.queryParameters),t.withResponseType(this.responseType),this._shouldSendAuthorization&&this._accessToken&&t.addHeader("Authorization","Bearer ".concat(this._accessToken)),t.addHeader("Accept","application/json"),this._includeCredentials&&t.includeCredentials(),this._shouldSendGlobalHeaders&&this._globalRequestHeaders.length>0&&this._globalRequestHeaders.forEach((function(e){var n=(0,f.Z)(e,2),r=n[0],i=n[1];t.addHeader(r,i)})),n=0;n<this._headers.length;n++)i=this._headers[n],t.addHeader(i.key,i.value);this.jsonContentType&&t.addHeader("Content-Type","application/json;charset=UTF-8"),this.body&&t.withPostData(this.body),e.prev=13,this.onBeforeSend(t),e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(13),e.abrupt("return",Promise.reject(e.t0));case 20:return this._startTimestamp=Date.now(),e.abrupt("return",t.send().then((function(e){return a.onAfterSend(),e})).catch((function(e){throw a.onAfterSend(e),e})));case 22:case"end":return e.stop()}}),e,this,[[13,17]])}))),function(){return t.apply(this,arguments)})}],[{key:"setRequestImplementation",value:function(e){r=e}}]),e}(),g=(n(259),n(28129),n(97749),n(6663)),S=function(){function e(t,n,r){return(0,i.Z)(this,e),this.method=t,this.url=n,this.postData=null,this.queryParameters=void 0,this.responseType="json",this._headers={},this._authorize=r,this._includeCredentials=!1,this}var t;return(0,a.Z)(e,[{key:"withQueryParameters",value:function(e){this.queryParameters=e}},{key:"withPostData",value:function(e){this.postData=e}},{key:"withResponseType",value:function(e){this.responseType=e}},{key:"addHeader",value:function(e,t){return this._headers[e]=t,this}},{key:"includeCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"send",value:(t=(0,h.Z)(m().mark((function e(){var t,n,r,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,g.k)(),n=new URLSearchParams(this.queryParameters).toString(),r="".concat(this.url).concat(n?"?".concat(n):""),i={method:this.method,responseType:this.responseType,headers:this._headers,authorize:this._authorize,rejectNotOk:!0},this._includeCredentials&&(i.credentials="include"),this.postData&&(null!==(a=this._headers["Content-Type"])&&void 0!==a&&a.startsWith("application/json;charset=UTF-8")?i.payload=JSON.stringify(this.postData):i.payload=this.postData),e.abrupt("return",t.request(r,i).then((function(e){return e})).catch((function(e){throw e})));case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}function T(e){return"".concat(e.method,"::").concat(e.host).concat(e.path,"::").concat(JSON.stringify(e.queryParameters))}function A(e,t,n){try{(0,d.sQ)({metric_type:l.MetricTypes.COUNTER,what:"request-rate",value:1,tags:{endpoint:e,statusCode:t,isFatal:n}}).catch((function(){return{}}))}catch(r){}}var R=function(e){(0,s.Z)(n,e);var t=k(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).pendingRequests=new Set,r}return(0,a.Z)(n,[{key:"resetPendingRequests",value:function(){this.pendingRequests=new Set}},{key:"build",value:function(){var e,t=this,r=(0,o.Z)((0,u.Z)(n.prototype),"build",this).call(this);return r.onBeforeSend=function(){if(e=T(r),t.pendingRequests.has(e)){var n=new Error("DUPLICATE_REQUEST_ERROR: Already sent this request (".concat(e,")"));throw n.name="DUPLICATE_REQUEST_ERROR",n}"GET"===r.method.toUpperCase()&&t.pendingRequests.add(e)},r.onAfterSend=function(n){e=T(r);var i="unknown",a=!1;if(null!==r.endpointIdentifier&&(a=!0,i="".concat(r.method," ").concat(r.host||window.location.origin,"::").concat(r.endpointIdentifier)),n)throw a&&A(i,JSON.stringify(n.status||0),JSON.stringify(0===(r.endpointIdentifier||"").indexOf("/me"))),t.pendingRequests.delete(e),p.m.fromResponse(n,r.method);if(a){A(i,"200","false");var o=Date.now()-(r.startTimestamp||0);!function(e,t,n){try{(0,d.sQ)({metric_type:l.MetricTypes.TIMER,what:"request-duration",value:n,tags:{endpoint:e,statusCode:t}}).catch((function(){return{}}))}catch(r){}}(i,"200",l.Time.fromMillis(o).asNanos())}t.pendingRequests.delete(e)},r}}]),n}(function(){function e(t){(0,i.Z)(this,e),this._accessToken=null,this._market="",this._locale="",this._globalRequestHeaders=[],this._RequestImplementation=t||S}return(0,a.Z)(e,[{key:"accessToken",get:function(){return this._accessToken},set:function(e){this._accessToken=e}},{key:"globalRequestHeaders",get:function(){return this._globalRequestHeaders},set:function(e){this._globalRequestHeaders=e}},{key:"market",get:function(){return this._market},set:function(e){this._market=e}},{key:"locale",get:function(){return this._locale},set:function(e){this._locale=e}},{key:"resetPendingRequests",value:function(){}},{key:"build",value:function(){b.setRequestImplementation(this._RequestImplementation);var e=new b;return e.accessToken=this._accessToken,e.market=this.market,e.locale=this.locale,e.globalRequestHeaders=this.globalRequestHeaders,e}}]),e}()),w=n(45005),O=n(74),P=n.n(O),N=n(21366),I=n.n(N);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=P()(w.fetch);function M(e){return e&&void 0!==e.retries&&e.retries>0?C:w.fetch}function x(e,t){return j.apply(this,arguments)}function j(){return j=(0,h.Z)(m().mark((function e(t,n){var r,i,a,o,s,c=arguments;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:1e4,i=new(I()),a=i.signal,o=setTimeout((function(){return i.abort()}),r),s=M(n),e.abrupt("return",s(t,L(L({},n),{},{signal:a})).then((function(e){return clearTimeout(o),e})).catch((function(e){var i;if("AbortError"===e.name)throw new p.V({timeout:r,url:t,method:null!==(i=null==n?void 0:n.method)&&void 0!==i?i:"get"});throw clearTimeout(o),e})));case 6:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(){function e(t,n){return(0,i.Z)(this,e),this.method=t,this.url=n,this.postData=null,this.queryParameters=void 0,this.responseType="json",this._headers={},this._includeCredentials=!1,this}var t;return(0,a.Z)(e,[{key:"withQueryParameters",value:function(e){this.queryParameters=e}},{key:"withResponseType",value:function(e){this.responseType=e}},{key:"withPostData",value:function(e){this.postData=e}},{key:"addHeader",value:function(e,t){return this._headers[e]=t,this}},{key:"includeCredentials",value:function(){return this._includeCredentials=!0,this}},{key:"send",value:(t=(0,h.Z)(m().mark((function e(){var t,n,r,i=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.postData&&(t=null!==(n=this._headers["Content-Type"])&&void 0!==n&&n.startsWith("application/json;charset=UTF-8")?JSON.stringify(this.postData):this.postData),r=new URLSearchParams(this.queryParameters).toString(),e.abrupt("return",x("".concat(this.url).concat(r?"?".concat(r):""),{method:this.method,body:t,credentials:this._includeCredentials?"include":void 0,headers:Z({"User-Agent":{}.SERVER_UA,"Content-Type":Y(this.responseType)},this._headers)}).then(function(){var e=(0,h.Z)(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}throw p.m.fromResponse(t,i.method||"GET");case 2:if("text"!==i.responseType){e.next=8;break}return e.next=5,t.text();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,t.json();case 10:e.t0=e.sent;case 11:return e.t1=e.t0,e.t2=t.status,e.abrupt("return",{body:e.t1,status:e.t2});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw e})));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function Y(e){return"text"===e?"text/plain":"application/json"}var F=null,B=function(){function e(){(0,i.Z)(this,e)}return(0,a.Z)(e,null,[{key:"setSession",value:function(e){if(e){var t=e.accessToken,n=this.getInstance();n.accessToken=t,t||n.resetPendingRequests()}}},{key:"setLocale",value:function(e){this.getInstance().locale=e}},{key:"setGlobalRequestHeaders",value:function(e){this.getInstance().globalRequestHeaders=e}},{key:"setMarket",value:function(e){this.getInstance().market=e}},{key:"resetInstance",value:function(){F=null}},{key:"getInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F||(F=this.createNew(e)),F}},{key:"createNew",value:function(e){var t=e.Constructor,n=void 0===t?R:t,r=e.fromServer;return new n(void 0!==r&&r?K:S)}}]),e}()},21151:(e,t,n)=>{"use strict";n.d(t,{SW:()=>s,wI:()=>c,B8:()=>u});const r=JSON.parse('{"Ls":"https://api.spotify.com","XA":"https://spclient.wg.spotify.com","xM":"https://accounts.spotify.com","l3":"https://api-partner.spotify.com"}');var i=r.Ls,a=r.XA,o=r.l3,s=(r.xM,""),c=("".concat(i,"/v1"),"".concat(a,"/melody/v1"),"".concat(a,"/radio-apollo/v3"),"".concat(a,"/recently-played/v3"),"".concat(a,"/collection-view/v1"),"".concat(a,"/sponsoredplaylist/v1"),"".concat(a,"/social-connect/v2"),"".concat(a,"/playlist/v2"),"".concat(a,"/inspiredby-mix/v2"),"".concat(a,"/ads"),"".concat(o,"/pathfinder/v1")),u=("".concat(a,"/autoplay-enabled"),"".concat(a,"/age-verification/v1"),"".concat(a,"/concerts"),"".concat(a,"/presence-view"),"".concat(a,"/presence2"),"".concat(a,"/find-friends"),"".concat(a,"/track-credits-view"),"".concat(a,"/color-lyrics/v2"),"".concat(a,"/metadata/4"),"".concat(a,"/user-profile-view/v3"),"".concat(a,"/consumer-wrapped/v1"),"".concat(a,"/campaigns-service/v1"),"".concat(a,"/consumer-only-you/v1"),"".concat(a,"/stories-view/v1"),"".concat(a,"/soundfinder/v1"));"".concat(a,"/"),"".concat(a,"/socialgraph/v2"),"".concat(a,"/vanilla/v1/views/hub2"),"".concat(a,"/ondemand-selector/v2"),"".concat(a,"/playlist-permission/v1"),"".concat(a,"/stories-view/v3"),"".concat(a,"/blend-invitation"),"".concat(a,"/playlistfreshener"),"".concat(a,"/spotify.audiobookcashier.v1.AudiobookCashier"),"".concat(a,"/the-stage/v1")},26458:(e,t,n)=>{"use strict";n.d(t,{V:()=>d,m:()=>l});n(61025),n(27433),n(89674);var r=n(7403),i=n(56141),a=n(75108),o=n(61351),s=n(28280),c=n(90632);n(26361),n(72511),n(72553);function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,o.Z)(this,n)}}var l=function(e){(0,a.Z)(n,e);var t=u(n);function n(e){var i;(0,r.Z)(this,n);var a=e.message,o=e.url,s=e.method,c=e.status,u=e.response;return(i=t.call(this,a)).name="HttpResponseError",i.requestUrl=o,i.requestMethod=s,i.status=c,i.response=u,i}return(0,i.Z)(n,null,[{key:"fromResponse",value:function(e,t){return new n({message:e.statusText,url:e.url,method:t,status:e.status,response:e})}}]),n}((0,c.Z)(Error)),d=function(e){(0,a.Z)(n,e);var t=u(n);function n(e){var i;(0,r.Z)(this,n);var a=e.timeout,o=e.url,s=e.method;return(i=t.call(this,{message:"".concat(s.toUpperCase()," ").concat(o," timed out (").concat(a,"ms)"),url:o,method:s,status:503})).name="HttpRequestTimeoutError",i.timeout=a,i}return(0,i.Z)(n)}(l)},47288:(e,t,n)=>{"use strict";n.d(t,{r:()=>o});var r=n(7403),i=n(56141),a=n(47871),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new a.vp;(0,r.Z)(this,e),this._emitter=t,this._emitter=t||new a.vp}return(0,i.Z)(e,[{key:"addListener",value:function(e,t,n){return this._emitter.addListener(e,t,n),this}},{key:"removeListener",value:function(e,t,n){return this._emitter.removeListener(e,t,n),this}},{key:"onAddListener",value:function(e,t){return this._emitter.onAddListener(e,t),this}},{key:"onRemoveListener",value:function(e,t){return this._emitter.onRemoveListener(e,t),this}},{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}},{key:"emitSync",value:function(e,t){return this._emitter.emitSync(e,t)}}]),e}()},71460:(e,t,n)=>{"use strict";n.d(t,{K:()=>a,Z:()=>r});n(44437),n(45830),n(89914),n(12282),n(74461),n(99949),n(61025),n(259),n(28977);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=document.getElementById(e);return n?JSON.parse(n.innerHTML):t}catch(r){return t}}function i(e){return decodeURIComponent(Array.prototype.map.call(atob(e),(function(e){var t="00".concat(e.charCodeAt(0).toString(16));return"%".concat(t.slice(-2))})).join(""))}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=document.getElementById(e);return n?JSON.parse(i(n.innerHTML)):t}catch(r){return t}}},42433:(e,t,n)=>{"use strict";n.d(t,{Bc:()=>f,rg:()=>r});n(61025),n(27433),n(89674);var r,i,a,o=n(7403),s=n(56141),c=n(75108),u=n(61351),l=n(28280),d=n(47288);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}!function(e){e.UPDATE="update",e.ERROR="error",e.ACTION="action",e.QUEUE_ACTION="queue_action",e.QUEUE_ACTION_COMPLETE="queue_action_complete",e.QUEUE_UPDATE="queue_update",e.CONTEXT_WRAPAROUND="context_wraparound"}(r||(r={})),function(e){e.PLAY="play",e.PAUSE="pause",e.RESUME="resume",e.SKIP_TO_NEXT="skipToNext",e.SKIP_TO_PREVIOUS="skipToPrevious"}(i||(i={})),function(e){e.ADD="add",e.REMOVE="remove",e.CLEAR="clear",e.INSERT="insert",e.REORDER="reorder"}(a||(a={}));var f=function(e){(0,c.Z)(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"emitPlaySync",value:function(e,t,n){return this.emitSync(r.ACTION,{action:i.PLAY,context:e,origin:t,options:n}).defaultPrevented}},{key:"emitPauseSync",value:function(){return this.emitSync(r.ACTION,{action:i.PAUSE}).defaultPrevented}},{key:"emitResumeSync",value:function(){return this.emitSync(r.ACTION,{action:i.RESUME}).defaultPrevented}},{key:"emitSkipToNextSync",value:function(){return this.emitSync(r.ACTION,{action:i.SKIP_TO_NEXT}).defaultPrevented}},{key:"emitSkipToPreviousSync",value:function(){return this.emitSync(r.ACTION,{action:i.SKIP_TO_PREVIOUS}).defaultPrevented}},{key:"emitQueueActionSync",value:function(e){return this.emitSync(r.QUEUE_ACTION,{action:e}).defaultPrevented}},{key:"emitQueueActionComplete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.emit(r.QUEUE_ACTION_COMPLETE,{action:e,error:t})}},{key:"emitQueueUpdate",value:function(e){this.emit(r.QUEUE_UPDATE,e)}}]),n}(d.r)},54876:(e,t,n)=>{"use strict";n.d(t,{Xo:()=>f,p1:()=>l,sQ:()=>d});var r,i=n(24190),a=n(16487),o=n(88158),s=n.n(o),c=(n(72553),n(97749),n(72511),n(67174));function u(e){var t="undefined"!=typeof window?"browser":"nodejs";return[c.EventSenderReporter.createWithCustomTransport({transport:e,environment:t})].concat((0,a.Z)([]))}function l(e,t){var n="production",i=(0,c.createSemanticMetrics)({key:e,dev:!n.startsWith("prod")&&!0,reporter:u(t)}).sendMetric;r=i}function d(e){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new Error("Invalid call to sendMetric before initSemanticMetrics.");case 2:return e.abrupt("return",r(t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return"/"===e.pathname?"home":e.pathname.split("/")[1]}},6663:(e,t,n)=>{"use strict";n.d(t,{J:()=>i,k:()=>a});n(72511);var r=null;function i(e){r=e}function a(){if(null===r)throw new Error("Missing `instance`. Have you called `setTransportInstance` yet?");return r}}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return a[e].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=a,e=[],s.O=(t,n,r,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,r,i]=e[l],o=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(s.O).every((e=>s.O[e](n[c])))?n.splice(c--,1):(o=!1,i<a&&(a=i));if(o){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,r,i]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var i=Object.create(null);s.r(i);var a={};t=t||[null,n({}),n([]),n(n)];for(var o=2&r&&e;"object"==typeof o&&!~t.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,s.d(i,a),i},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,n)=>(s.f[n](e,t),t)),[])),s.u=e=>(({446:"spotify_player_h",768:"spotify_player_o"}[e]||e)+"."+{262:"478a0aff",446:"f6fe7afb",768:"b38d11a8",899:"c686ee92"}[e]+".js"),s.miniCssF=e=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},i="client-web:",s.l=(e,t,n,a)=>{if(r[e])r[e].push(t);else{var o,c;if(void 0!==n)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==i+n){o=d;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",i+n),o.src=e),r[e]=[t];var p=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=r[e];if(delete r[e],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),c&&document.head.appendChild(o)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),s.j=991,s.p="https://open.spotifycdn.com/cdn/build/embed/",(()=>{var e={991:0};s.f.j=(t,n)=>{var r=s.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var a=s.p+s.u(t),o=new Error;s.l(a,(n=>{if(s.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,r[1](o)}}),"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,n)=>{var r,i,[a,o,c]=n,u=0;if(a.some((t=>0!==e[t]))){for(r in o)s.o(o,r)&&(s.m[r]=o[r]);if(c)var l=c(s)}for(t&&t(n);u<a.length;u++)i=a[u],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(l)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),s.nc=void 0;var c=s.O(void 0,[925],(()=>s(41401)));c=s.O(c)})();